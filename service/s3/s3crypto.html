<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>
  Package: s3crypto
  
    &mdash; IBM COS SDK for Go
  
</title>

  <link rel="stylesheet" href="../../css/style.css" type="text/css" />

  <link rel="stylesheet" href="../../css/common.css" type="text/css" />

  <link rel="stylesheet" href="../../css/highlight.github.css" type="text/css" />

<script type="text/javascript">
  pathId = "service/s3/s3crypto";
  relpath = '../../';
</script>


  <script type="text/javascript" charset="utf-8" src="../../js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="../../js/app.js"></script>


  </head>
  <body>
    <div class="nav_wrap">
      <iframe id="nav" src="../../package_list.html"></iframe>
      <div id="resizer"></div>
    </div>

    <div id="main" tabindex="-1">
      <div id="header">
        <div id="menu">
  
    <a href="../../_index.html">Index (s)</a> &raquo;
    <span class='title'><span class='object_link'><a href="../../service.html" title="service (package)">service</a></span></span> &raquo; <span class='title'><span class='object_link'><a href="../s3.html" title="s3 (package)">s3</a></span></span>
     &raquo; 
    <span class="title">s3crypto</span>
  
</div>

        <div id="search">
  
    <a class="full_list_link" id="package_list_link"
        href="../../package_list.html">

        <svg width="24" height="24">
          <rect x="0" y="4" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="12" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="20" width="24" height="4" rx="1" ry="1"></rect>
        </svg>
    </a>
  
</div>
        <div class="clear"></div>
      </div>

      <iframe id="search_frame"></iframe>

      <div id="content">
        <!--REGION_DISCLAIMER_DO_NOT_REMOVE-->
        <h1>Package: s3crypto
  
  
  
</h1>
<div class="package signature">
import "../ibm-cos-sdk-go/service/s3/s3crypto"
</div>

  
    <h2>Constants</h2>
    
      <dl class="constants">
        
          <dt id="DefaultInstructionKeySuffix-constant" class="">
          <div class="defn">const <strong>DefaultInstructionKeySuffix</strong>  = 
          <span class="note title readonly">readonly</span>
          
          </div>
            <div class="docstring">
  <div class="discussion">
    
<p>DefaultInstructionKeySuffix is appended to the end of the instruction file key when grabbing or saving to S3</p>


  </div>
</div>
<div class="tags">
  

</div>
          </dt>
          <dd>
            <h3>Value:</h3>
            <pre class="code"><div class="hljs"><span class="hljs-string">".instruction"</span></div></pre>
          </dd>
        
          <dt id="AESGCMNoPadding-constant" class="">
          <div class="defn">const <strong>AESGCMNoPadding</strong>  = 
          <span class="note title readonly">readonly</span>
          
          </div>
            <div class="docstring">
  <div class="discussion">
    
<p>AESGCMNoPadding is the constant value that is used to specify the cek algorithm consiting of AES GCM with no padding.</p>


  </div>
</div>
<div class="tags">
  

</div>
          </dt>
          <dd>
            <h3>Value:</h3>
            <pre class="code"><div class="hljs"><span class="hljs-string">"AES/GCM/NoPadding"</span></div></pre>
          </dd>
        
          <dt id="AESCBC-constant" class="">
          <div class="defn">const <strong>AESCBC</strong>  = 
          <span class="note title readonly">readonly</span>
          
          </div>
            <div class="docstring">
  <div class="discussion">
    
<p>AESCBC is the string constant that signifies the AES CBC algorithm cipher.</p>


  </div>
</div>
<div class="tags">
  

</div>
          </dt>
          <dd>
            <h3>Value:</h3>
            <pre class="code"><div class="hljs"><span class="hljs-string">"AES/CBC"</span></div></pre>
          </dd>
        
          <dt id="KMSWrap-constant" class="">
          <div class="defn">const <strong>KMSWrap</strong>  = 
          <span class="note title readonly">readonly</span>
          
          </div>
            <div class="docstring">
  <div class="discussion">
    
<p>KMSWrap is a constant used during decryption to build a KMS key handler.</p>


  </div>
</div>
<div class="tags">
  

</div>
          </dt>
          <dd>
            <h3>Value:</h3>
            <pre class="code"><div class="hljs"><span class="hljs-string">"kms"</span></div></pre>
          </dd>
        
          <dt id="DefaultMinFileSize-constant" class="">
          <div class="defn">const <strong>DefaultMinFileSize</strong>  = 
          <span class="note title readonly">readonly</span>
          
          </div>
            <div class="docstring">
  <div class="discussion">
    
<p>DefaultMinFileSize is used to check whether we want to write to a temp file or store the data in memory.</p>


  </div>
</div>
<div class="tags">
  

</div>
          </dt>
          <dd>
            <h3>Value:</h3>
            <pre class="code"><div class="hljs">1024 * 512 * 5</div></pre>
          </dd>
        
          <dt id="KMSContextWrap-constant" class="">
          <div class="defn">const <strong>KMSContextWrap</strong>  = 
          <span class="note title readonly">readonly</span>
          
          </div>
            <div class="docstring">
  <div class="discussion">
    
<p>KMSContextWrap is a constant used during decryption to build a kms+context key handler</p>


  </div>
</div>
<div class="tags">
  

</div>
          </dt>
          <dd>
            <h3>Value:</h3>
            <pre class="code"><div class="hljs"><span class="hljs-string">"kms+context"</span></div></pre>
          </dd>
        
      </dl>
    
  

  
    <h2>Variables</h2>
    
      <dl class="constants">
        
          <dt id="NoPadder-constant" class="">
          <div class="defn">var <strong>NoPadder</strong>  = 
          <span class="note title writeonly">writable</span>
          </div>
            <div class="docstring">
  <div class="discussion">
    
<p>NoPadder does not pad anything</p>


  </div>
</div>
<div class="tags">
  

</div>
          </dt>
          <dd>
            <h3>Value:</h3>
            <pre class="code"><div class="hljs"><span class='object_link'><a href="s3crypto/Padder.html" title="s3crypto.Padder (interface)">Padder</a></span>(noPadder{})</div></pre>
          </dd>
        
          <dt id="AESCBCPadder-constant" class="">
          <div class="defn">var <strong>AESCBCPadder</strong>  = 
          <span class="note title writeonly">writable</span>
          </div>
            <div class="docstring">
  <div class="discussion">
    
<p>AESCBCPadder is used to pad AES encrypted and decrypted data. Although it uses the pkcs5Padder, it isn&#39;t following the RFC for PKCS5. The only reason why it is called pkcs5Padder is due to the Name returning PKCS5Padding.</p>


  </div>
</div>
<div class="tags">
  

</div>
          </dt>
          <dd>
            <h3>Value:</h3>
            <pre class="code"><div class="hljs"><span class='object_link'><a href="s3crypto/Padder.html" title="s3crypto.Padder (interface)">Padder</a></span>(aescbcPadding)</div></pre>
          </dd>
        
          <dt id="_-constant" class="">
          <div class="defn">var <strong>_</strong> awsFixture = 
          <span class="note title writeonly">writable</span>
          </div>
            
          </dt>
          <dd>
            <h3>Value:</h3>
            <pre class="code"><div class="hljs">(*kmsContextKeyHandler)(<span class="hljs-constant">nil</span>)</div></pre>
          </dd>
        
      </dl>
    
  







  <h2>
    Type Summary
    <small><a href="#" class="summary_toggle">collapse</a></small>
  </h2>

  <ul class="summary">
    
      
<li class="public ">
  <span class="summary_signature"><span class='object_link'><a href="s3crypto/CipherData.html" title="s3crypto.CipherData (struct)"><strong>CipherData</strong></a></span></span>
  
  
  <span class="note title readonly">struct</span>
  
  
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>CipherData is used for content encryption.</p>
</div></span>
  
</li>


    
      
<li class="public ">
  <span class="summary_signature"><span class='object_link'><a href="s3crypto/CryptoReadCloser.html" title="s3crypto.CryptoReadCloser (struct)"><strong>CryptoReadCloser</strong></a></span></span>
  
  
  <span class="note title readonly">struct</span>
  
  
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>CryptoReadCloser handles closing of the body and allowing reads from the decrypted content.</p>
</div></span>
  
</li>


    
      
<li class="public ">
  <span class="summary_signature"><span class='object_link'><a href="s3crypto/CryptoRegistry.html" title="s3crypto.CryptoRegistry (struct)"><strong>CryptoRegistry</strong></a></span></span>
  
  
  <span class="note title readonly">struct</span>
  
  
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>CryptoRegistry is a collection of registries for configuring a decryption client with different key wrapping algorithms, content encryption algorithms, and padders.</p>
</div></span>
  
</li>


    
      
<li class="public ">
  <span class="summary_signature"><span class='object_link'><a href="s3crypto/DecryptionClient.html" title="s3crypto.DecryptionClient (struct)"><strong>DecryptionClient</strong></a></span></span>
  
  
  <span class="note title readonly">struct</span>
  
  
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>DecryptionClient is an S3 crypto client.</p>
</div></span>
  
</li>


    
      
<li class="public ">
  <span class="summary_signature"><span class='object_link'><a href="#type-DecryptionClientOptions" title="s3crypto (package)"><strong>DecryptionClientOptions</strong></a></span></span>
  
  
  <span class="note title readonly">struct</span>
  
  
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>DecryptionClientOptions is the configuration options for DecryptionClientV2.</p>
</div></span>
  
</li>


    
      
<li class="public ">
  <span class="summary_signature"><span class='object_link'><a href="s3crypto/DecryptionClientV2.html" title="s3crypto.DecryptionClientV2 (struct)"><strong>DecryptionClientV2</strong></a></span></span>
  
  
  <span class="note title readonly">struct</span>
  
  
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>DecryptionClientV2 is an S3 crypto client.</p>
</div></span>
  
</li>


    
      
<li class="public ">
  <span class="summary_signature"><span class='object_link'><a href="s3crypto/EncryptionClient.html" title="s3crypto.EncryptionClient (struct)"><strong>EncryptionClient</strong></a></span></span>
  
  
  <span class="note title readonly">struct</span>
  
  
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>EncryptionClient is an S3 crypto client.</p>
</div></span>
  
</li>


    
      
<li class="public ">
  <span class="summary_signature"><span class='object_link'><a href="#type-EncryptionClientOptions" title="s3crypto (package)"><strong>EncryptionClientOptions</strong></a></span></span>
  
  
  <span class="note title readonly">struct</span>
  
  
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>EncryptionClientOptions is the configuration options for EncryptionClientV2.</p>
</div></span>
  
</li>


    
      
<li class="public ">
  <span class="summary_signature"><span class='object_link'><a href="s3crypto/EncryptionClientV2.html" title="s3crypto.EncryptionClientV2 (struct)"><strong>EncryptionClientV2</strong></a></span></span>
  
  
  <span class="note title readonly">struct</span>
  
  
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>EncryptionClientV2 is an S3 crypto client.</p>
</div></span>
  
</li>


    
      
<li class="public ">
  <span class="summary_signature"><span class='object_link'><a href="s3crypto/Envelope.html" title="s3crypto.Envelope (struct)"><strong>Envelope</strong></a></span></span>
  
  
  <span class="note title readonly">struct</span>
  
  
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Envelope encryption starts off by generating a random symmetric key using AES GCM.</p>
</div></span>
  
</li>


    
      
<li class="public ">
  <span class="summary_signature"><span class='object_link'><a href="s3crypto/HeaderV2LoadStrategy.html" title="s3crypto.HeaderV2LoadStrategy (struct)"><strong>HeaderV2LoadStrategy</strong></a></span></span>
  
  
  <span class="note title readonly">struct</span>
  
  
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Load from a given object&#39;s header.</p>
</div></span>
  
</li>


    
      
<li class="public ">
  <span class="summary_signature"><span class='object_link'><a href="s3crypto/HeaderV2SaveStrategy.html" title="s3crypto.HeaderV2SaveStrategy (struct)"><strong>HeaderV2SaveStrategy</strong></a></span></span>
  
  
  <span class="note title readonly">struct</span>
  
  
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Save will save the envelope to the request&#39;s header.</p>
</div></span>
  
</li>


    
      
<li class="public ">
  <span class="summary_signature"><span class='object_link'><a href="s3crypto/MaterialDescription.html" title="s3crypto.MaterialDescription (struct)"><strong>MaterialDescription</strong></a></span></span>
  
  
  <span class="note title readonly">struct</span>
  
  
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Clone returns a copy of the MaterialDescription.</p>
</div></span>
  
</li>


    
      
<li class="public ">
  <span class="summary_signature"><span class='object_link'><a href="s3crypto/S3LoadStrategy.html" title="s3crypto.S3LoadStrategy (struct)"><strong>S3LoadStrategy</strong></a></span></span>
  
  
  <span class="note title readonly">struct</span>
  
  
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>S3LoadStrategy will load the instruction file from s3.</p>
</div></span>
  
</li>


    
      
<li class="public ">
  <span class="summary_signature"><span class='object_link'><a href="s3crypto/S3SaveStrategy.html" title="s3crypto.S3SaveStrategy (struct)"><strong>S3SaveStrategy</strong></a></span></span>
  
  
  <span class="note title readonly">struct</span>
  
  
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>S3SaveStrategy will save the metadata to a separate instruction file in S3.</p>
</div></span>
  
</li>


    
  </ul>


  <h2>
    Interface Summary
    <small><a href="#" class="summary_toggle">collapse</a></small>
  </h2>

  <ul class="summary">
    
      
<li class="public ">
  <span class="summary_signature"><span class='object_link'><a href="s3crypto/Cipher.html" title="s3crypto.Cipher (interface)"><strong>Cipher</strong></a></span></span>
  
  
  
  
  
  <span class="note title interface">interface</span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Cipher interface allows for either encryption and decryption of an object.</p>
</div></span>
  
</li>


    
      
<li class="public ">
  <span class="summary_signature"><span class='object_link'><a href="s3crypto/CipherDataDecrypter.html" title="s3crypto.CipherDataDecrypter (interface)"><strong>CipherDataDecrypter</strong></a></span></span>
  
  
  
  
  
  <span class="note title interface">interface</span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>CipherDataDecrypter is a handler to decrypt keys from the envelope.</p>
</div></span>
  
</li>


    
      
<li class="public ">
  <span class="summary_signature"><span class='object_link'><a href="s3crypto/CipherDataDecrypterWithContext.html" title="s3crypto.CipherDataDecrypterWithContext (interface)"><strong>CipherDataDecrypterWithContext</strong></a></span></span>
  
  
  
  
  
  <span class="note title interface">interface</span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>CipherDataDecrypterWithContext is a handler to decrypt keys from the envelope with request context.</p>
</div></span>
  
</li>


    
      
<li class="public ">
  <span class="summary_signature"><span class='object_link'><a href="s3crypto/CipherDataGenerator.html" title="s3crypto.CipherDataGenerator (interface)"><strong>CipherDataGenerator</strong></a></span></span>
  
  
  
  
  
  <span class="note title interface">interface</span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>CipherDataGenerator handles generating proper key and IVs of proper size for the content cipher.</p>
</div></span>
  
</li>


    
      
<li class="public ">
  <span class="summary_signature"><span class='object_link'><a href="s3crypto/CipherDataGeneratorWithCEKAlg.html" title="s3crypto.CipherDataGeneratorWithCEKAlg (interface)"><strong>CipherDataGeneratorWithCEKAlg</strong></a></span></span>
  
  
  
  
  
  <span class="note title interface">interface</span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>CipherDataGeneratorWithCEKAlg handles generating proper key and IVs of proper size for the content cipher.</p>
</div></span>
  
</li>


    
      
<li class="public ">
  <span class="summary_signature"><span class='object_link'><a href="s3crypto/CipherDataGeneratorWithContext.html" title="s3crypto.CipherDataGeneratorWithContext (interface)"><strong>CipherDataGeneratorWithContext</strong></a></span></span>
  
  
  
  
  
  <span class="note title interface">interface</span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>CipherDataGeneratorWithContext handles generating proper key and IVs of proper size for the content cipher.</p>
</div></span>
  
</li>


    
      
<li class="public ">
  <span class="summary_signature"><span class='object_link'><a href="s3crypto/ContentCipher.html" title="s3crypto.ContentCipher (interface)"><strong>ContentCipher</strong></a></span></span>
  
  
  
  
  
  <span class="note title interface">interface</span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>ContentCipher deals with encrypting and decrypting content.</p>
</div></span>
  
</li>


    
      
<li class="public ">
  <span class="summary_signature"><span class='object_link'><a href="s3crypto/ContentCipherBuilder.html" title="s3crypto.ContentCipherBuilder (interface)"><strong>ContentCipherBuilder</strong></a></span></span>
  
  
  
  
  
  <span class="note title interface">interface</span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>ContentCipherBuilder is a builder interface that builds ciphers for each request.</p>
</div></span>
  
</li>


    
      
<li class="public ">
  <span class="summary_signature"><span class='object_link'><a href="s3crypto/ContentCipherBuilderWithContext.html" title="s3crypto.ContentCipherBuilderWithContext (interface)"><strong>ContentCipherBuilderWithContext</strong></a></span></span>
  
  
  
  
  
  <span class="note title interface">interface</span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>ContentCipherBuilderWithContext is a builder interface that builds ciphers for each request.</p>
</div></span>
  
</li>


    
      
<li class="public ">
  <span class="summary_signature"><span class='object_link'><a href="s3crypto/Decrypter.html" title="s3crypto.Decrypter (interface)"><strong>Decrypter</strong></a></span></span>
  
  
  
  
  
  <span class="note title interface">interface</span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Decrypter interface with only the decrypt method.</p>
</div></span>
  
</li>


    
      
<li class="public ">
  <span class="summary_signature"><span class='object_link'><a href="s3crypto/Encrypter.html" title="s3crypto.Encrypter (interface)"><strong>Encrypter</strong></a></span></span>
  
  
  
  
  
  <span class="note title interface">interface</span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Encrypter interface with only the encrypt method.</p>
</div></span>
  
</li>


    
      
<li class="public ">
  <span class="summary_signature"><span class='object_link'><a href="s3crypto/LoadStrategy.html" title="s3crypto.LoadStrategy (interface)"><strong>LoadStrategy</strong></a></span></span>
  
  
  
  
  
  <span class="note title interface">interface</span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>LoadStrategy …</p>
</div></span>
  
</li>


    
      
<li class="public ">
  <span class="summary_signature"><span class='object_link'><a href="s3crypto/Padder.html" title="s3crypto.Padder (interface)"><strong>Padder</strong></a></span></span>
  
  
  
  
  
  <span class="note title interface">interface</span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Padder handles padding of crypto data.</p>
</div></span>
  
</li>


    
      
<li class="public ">
  <span class="summary_signature"><span class='object_link'><a href="s3crypto/SaveStrategy.html" title="s3crypto.SaveStrategy (interface)"><strong>SaveStrategy</strong></a></span></span>
  
  
  
  
  
  <span class="note title interface">interface</span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>SaveStrategy is how the data&#39;s metadata wants to be saved.</p>
</div></span>
  
</li>


    
  </ul>


  
    <h2>
      Function  Summary
      <small><a href="#" class="summary_toggle">collapse</a></small>
    </h2>

    <ul class="summary">
      
        
<li class="public ">
  <span class="summary_signature"><span class='object_link'><a href="#AESCBCContentCipherBuilder-class_method" title="s3crypto.AESCBCContentCipherBuilder() (method)">func <strong>AESCBCContentCipherBuilder</strong>(generator CipherDataGenerator, padder Padder) ContentCipherBuilder </a></span></span>
  
  
  
  
  
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>AESCBCContentCipherBuilder returns a new encryption only AES/CBC mode structure using the provided padder.</p>
</div></span>
  
</li>


      
        
<li class="public ">
  <span class="summary_signature"><span class='object_link'><a href="#AESGCMContentCipherBuilder-class_method" title="s3crypto.AESGCMContentCipherBuilder() (method)">func <strong>AESGCMContentCipherBuilder</strong>(generator CipherDataGenerator) ContentCipherBuilder </a></span></span>
  
  
  
  
  
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>AESGCMContentCipherBuilder returns a new encryption only AES/GCM mode structure with a specific cipher data generator that will provide keys to be used for content encryption.</p>
</div></span>
  
</li>


      
        
<li class="public ">
  <span class="summary_signature"><span class='object_link'><a href="#AESGCMContentCipherBuilderV2-class_method" title="s3crypto.AESGCMContentCipherBuilderV2() (method)">func <strong>AESGCMContentCipherBuilderV2</strong>(generator CipherDataGeneratorWithCEKAlg) ContentCipherBuilder </a></span></span>
  
  
  
  
  
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>AESGCMContentCipherBuilderV2 returns a new encryption only AES/GCM mode structure with a specific cipher data generator that will provide keys to be used for content encryption.</p>
</div></span>
  
</li>


      
        
<li class="public ">
  <span class="summary_signature"><span class='object_link'><a href="#NewDecryptionClient-class_method" title="s3crypto.NewDecryptionClient() (method)">func <strong>NewDecryptionClient</strong>(prov client.ConfigProvider, options ...func(*DecryptionClient)) *DecryptionClient </a></span></span>
  
  
  
  
  
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>NewDecryptionClient instantiates a new S3 crypto client.</p>
</div></span>
  
</li>


      
        
<li class="public ">
  <span class="summary_signature"><span class='object_link'><a href="#NewEncryptionClient-class_method" title="s3crypto.NewEncryptionClient() (method)">func <strong>NewEncryptionClient</strong>(prov client.ConfigProvider, builder ContentCipherBuilder, options ...func(*EncryptionClient)) *EncryptionClient </a></span></span>
  
  
  
  
  
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>NewEncryptionClient instantiates a new S3 crypto client.</p>
</div></span>
  
</li>


      
        
<li class="public ">
  <span class="summary_signature"><span class='object_link'><a href="#NewKMSContextKeyGenerator-class_method" title="s3crypto.NewKMSContextKeyGenerator() (method)">func <strong>NewKMSContextKeyGenerator</strong>(client kmsiface.KMSAPI, cmkID string, matdesc MaterialDescription) CipherDataGeneratorWithCEKAlg </a></span></span>
  
  
  
  
  
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>NewKMSContextKeyGenerator builds a new kms+context key provider using the customer key ID and material description.</p>
</div></span>
  
</li>


      
        
<li class="public ">
  <span class="summary_signature"><span class='object_link'><a href="#NewKMSKeyGenerator-class_method" title="s3crypto.NewKMSKeyGenerator() (method)">func <strong>NewKMSKeyGenerator</strong>(kmsClient kmsiface.KMSAPI, cmkID string) CipherDataGenerator </a></span></span>
  
  
  
  
  
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>NewKMSKeyGenerator builds a new KMS key provider using the customer key ID and material description.</p>
</div></span>
  
</li>


      
        
<li class="public ">
  <span class="summary_signature"><span class='object_link'><a href="#NewKMSKeyGeneratorWithMatDesc-class_method" title="s3crypto.NewKMSKeyGeneratorWithMatDesc() (method)">func <strong>NewKMSKeyGeneratorWithMatDesc</strong>(kmsClient kmsiface.KMSAPI, cmkID string, matdesc MaterialDescription) CipherDataGenerator </a></span></span>
  
  
  
  
  
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>NewKMSKeyGeneratorWithMatDesc builds a new KMS key provider using the customer key ID and material description.</p>
</div></span>
  
</li>


      
        
<li class="public ">
  <span class="summary_signature"><span class='object_link'><a href="#NewKMSWrapEntry-class_method" title="s3crypto.NewKMSWrapEntry() (method)">func <strong>NewKMSWrapEntry</strong>(kmsClient kmsiface.KMSAPI) WrapEntry </a></span></span>
  
  
  
  
  
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>NewKMSWrapEntry builds returns a new KMS key provider and its decrypt handler.</p>
</div></span>
  
</li>


      
        
<li class="public ">
  <span class="summary_signature"><span class='object_link'><a href="#NewPKCS7Padder-class_method" title="s3crypto.NewPKCS7Padder() (method)">func <strong>NewPKCS7Padder</strong>(blockSize int) Padder </a></span></span>
  
  
  
  
  
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>NewPKCS7Padder follows the RFC 2315: <a href="https://www.ietf.org/rfc/rfc2315.txt">www.ietf.org/rfc/rfc2315.txt</a> PKCS7 padding is subject to side-channel attacks and timing attacks.</p>
</div></span>
  
</li>


      
        
<li class="public ">
  <span class="summary_signature"><span class='object_link'><a href="#RegisterAESCBCContentCipher-class_method" title="s3crypto.RegisterAESCBCContentCipher() (method)">func <strong>RegisterAESCBCContentCipher</strong>(registry *CryptoRegistry, padder Padder) error </a></span></span>
  
  
  
  
  
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>RegisterAESCBCContentCipher registers the AES/CBC cipher and padder with the provided CryptoRegistry.</p>
</div></span>
  
</li>


      
        
<li class="public ">
  <span class="summary_signature"><span class='object_link'><a href="#RegisterAESGCMContentCipher-class_method" title="s3crypto.RegisterAESGCMContentCipher() (method)">func <strong>RegisterAESGCMContentCipher</strong>(registry *CryptoRegistry) error </a></span></span>
  
  
  
  
  
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>RegisterAESGCMContentCipher registers the AES/GCM content cipher algorithm with the provided CryptoRegistry.</p>
</div></span>
  
</li>


      
        
<li class="public ">
  <span class="summary_signature"><span class='object_link'><a href="#RegisterKMSContextWrapWithAnyCMK-class_method" title="s3crypto.RegisterKMSContextWrapWithAnyCMK() (method)">func <strong>RegisterKMSContextWrapWithAnyCMK</strong>(registry *CryptoRegistry, client kmsiface.KMSAPI) error </a></span></span>
  
  
  
  
  
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>RegisterKMSContextWrapWithAnyCMK registers the kms+context wrapping algorithm to the given WrapRegistry.</p>
</div></span>
  
</li>


      
        
<li class="public ">
  <span class="summary_signature"><span class='object_link'><a href="#RegisterKMSContextWrapWithCMK-class_method" title="s3crypto.RegisterKMSContextWrapWithCMK() (method)">func <strong>RegisterKMSContextWrapWithCMK</strong>(registry *CryptoRegistry, client kmsiface.KMSAPI, cmkID string) error </a></span></span>
  
  
  
  
  
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>RegisterKMSContextWrapWithCMK registers the kms+context wrapping algorithm to the given WrapRegistry.</p>
</div></span>
  
</li>


      
        
<li class="public ">
  <span class="summary_signature"><span class='object_link'><a href="#RegisterKMSWrapWithAnyCMK-class_method" title="s3crypto.RegisterKMSWrapWithAnyCMK() (method)">func <strong>RegisterKMSWrapWithAnyCMK</strong>(registry *CryptoRegistry, client kmsiface.KMSAPI) error </a></span></span>
  
  
  
  
  
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>RegisterKMSWrapWithAnyCMK registers the <code>kms</code> wrapping algorithm to the given WrapRegistry.</p>
</div></span>
  
</li>


      
        
<li class="public ">
  <span class="summary_signature"><span class='object_link'><a href="#RegisterKMSWrapWithCMK-class_method" title="s3crypto.RegisterKMSWrapWithCMK() (method)">func <strong>RegisterKMSWrapWithCMK</strong>(registry *CryptoRegistry, client kmsiface.KMSAPI, cmkID string) error </a></span></span>
  
  
  
  
  
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>RegisterKMSWrapWithCMK registers the <code>kms</code> wrapping algorithm to the given WrapRegistry.</p>
</div></span>
  
</li>


      
    </ul>
  




  <div id="type_details" class="method_details_list">
    <h2>Type Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="type-DecryptionClientOptions">
  
    <strong>DecryptionClientOptions</strong> struct
  

  
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>DecryptionClientOptions is the configuration options for DecryptionClientV2.</p>


  </div>
</div>
<div class="tags">
  

</div><div class="tags">
<p class="tag_title">Structure Fields:</p>
<dl class="fields">

  <dt><code>
    <strong>S3Client</strong> <span class='object_link'><a href="../s3iface/S3API.html" title="s3iface.S3API (interface)">s3iface.S3API</a></span> 
    
    
  </code></dt>
  <dd>
    
    
  </dd>

  <dt><code>
    <strong>LoadStrategy</strong> <span class='object_link'><a href="#LoadStrategy-field" title="s3crypto.DecryptionClientOptions.LoadStrategy (field)">LoadStrategy</a></span> 
    
    
  </code></dt>
  <dd>
    
<p>LoadStrategy is used to load the metadata either from the metadata of the object or from a separate file in s3.</p>

<p>Defaults to our default load strategy.</p>

    
  </dd>

  <dt><code>
    <strong>CryptoRegistry</strong> *<span class='object_link'><a href="#CryptoRegistry-field" title="s3crypto.DecryptionClientOptions.CryptoRegistry (field)">CryptoRegistry</a></span> 
    
    
  </code></dt>
  <dd>
    
    
  </dd>


</dl>
</div>


</div>
    
      <div class="method_details ">
  <h3 class="signature " id="type-EncryptionClientOptions">
  
    <strong>EncryptionClientOptions</strong> struct
  

  
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>EncryptionClientOptions is the configuration options for EncryptionClientV2</p>


  </div>
</div>
<div class="tags">
  

</div><div class="tags">
<p class="tag_title">Structure Fields:</p>
<dl class="fields">

  <dt><code>
    <strong>S3Client</strong> <span class='object_link'><a href="../s3iface/S3API.html" title="s3iface.S3API (interface)">s3iface.S3API</a></span> 
    
    
  </code></dt>
  <dd>
    
    
  </dd>

  <dt><code>
    <strong>ContentCipherBuilder</strong> <span class='object_link'><a href="#ContentCipherBuilder-field" title="s3crypto.EncryptionClientOptions.ContentCipherBuilder (field)">ContentCipherBuilder</a></span> 
    
    
  </code></dt>
  <dd>
    
    
  </dd>

  <dt><code>
    <strong>SaveStrategy</strong> <span class='object_link'><a href="#SaveStrategy-field" title="s3crypto.EncryptionClientOptions.SaveStrategy (field)">SaveStrategy</a></span> 
    
    
  </code></dt>
  <dd>
    
<p>SaveStrategy will dictate where the envelope is saved.</p>

<p>Defaults to the object&#39;s metadata</p>

    
  </dd>

  <dt><code>
    <strong>TempFolderPath</strong> string 
    
    
  </code></dt>
  <dd>
    
<p>TempFolderPath is used to store temp files when calling PutObject. Temporary files are needed to compute the X-Amz-Content-Sha256 header.</p>

    
  </dd>

  <dt><code>
    <strong>MinFileSize</strong> int64 
    
    
  </code></dt>
  <dd>
    
<p>MinFileSize is the minimum size for the content to write to a temporary file instead of using memory.</p>

    
  </dd>


</dl>
</div>


</div>
    
  </div>


  <div id="Function_method_details" class="method_details_list">
    <h2>Function Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="AESCBCContentCipherBuilder-class_method">
  
    func <strong><span class='object_link'><a href="#AESCBCContentCipherBuilder-class_method" title="s3crypto.AESCBCContentCipherBuilder() (method)">AESCBCContentCipherBuilder</a></span></strong>(generator <span class='object_link'><a href="s3crypto/CipherDataGenerator.html" title="s3crypto.CipherDataGenerator (interface)">CipherDataGenerator</a></span>, padder <span class='object_link'><a href="s3crypto/Padder.html" title="s3crypto.Padder (interface)">Padder</a></span>) <span class='object_link'><a href="s3crypto/ContentCipherBuilder.html" title="s3crypto.ContentCipherBuilder (interface)">ContentCipherBuilder</a></span> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>AESCBCContentCipherBuilder returns a new encryption only AES/CBC mode structure using the provided padder. The provided cipher data generator will be used to provide keys for content encryption.</p>

<p>deprecated: This feature is in maintenance mode, no new updates will be released. Please see <a href="https://docs.aws.amazon.com/general/latest/gr/aws_sdk_cryptography.html">docs.aws.amazon.com/general/latest/gr/aws_sdk_cryptography.html</a> for more information.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


20
21
22</pre>
    </td>
    <td>
      <pre class="code"><span class="info file">// File 'service/s3/s3crypto/aes_cbc_content_cipher.go', line 20</span>

<div class="hljs"><span class="hljs-keyword">func</span> AESCBCContentCipherBuilder(generator CipherDataGenerator, padder Padder) ContentCipherBuilder {
	<span class="hljs-keyword">return</span> cbcContentCipherBuilder{generator: generator, padder: padder}
}</div></pre>
    </td>
  </tr>
</table>

</div>
    
      <div class="method_details ">
  <h3 class="signature " id="AESGCMContentCipherBuilder-class_method">
  
    func <strong><span class='object_link'><a href="#AESGCMContentCipherBuilder-class_method" title="s3crypto.AESGCMContentCipherBuilder() (method)">AESGCMContentCipherBuilder</a></span></strong>(generator <span class='object_link'><a href="s3crypto/CipherDataGenerator.html" title="s3crypto.CipherDataGenerator (interface)">CipherDataGenerator</a></span>) <span class='object_link'><a href="s3crypto/ContentCipherBuilder.html" title="s3crypto.ContentCipherBuilder (interface)">ContentCipherBuilder</a></span> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>AESGCMContentCipherBuilder returns a new encryption only AES/GCM mode structure with a specific cipher data generator that will provide keys to be used for content encryption.</p>

<p>Note: This uses the Go stdlib AEAD implementation for AES/GCM. Due to this objects to be encrypted or decrypted will be fully loaded into memory before encryption or decryption can occur. Caution must be taken to avoid memory allocation failures.</p>

<p>deprecated: This feature is in maintenance mode, no new updates will be released. Please see <a href="https://docs.aws.amazon.com/general/latest/gr/aws_sdk_cryptography.html">docs.aws.amazon.com/general/latest/gr/aws_sdk_cryptography.html</a> for more information.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


22
23
24</pre>
    </td>
    <td>
      <pre class="code"><span class="info file">// File 'service/s3/s3crypto/aes_gcm_content_cipher.go', line 22</span>

<div class="hljs"><span class="hljs-keyword">func</span> AESGCMContentCipherBuilder(generator CipherDataGenerator) ContentCipherBuilder {
	<span class="hljs-keyword">return</span> gcmContentCipherBuilder{generator}
}</div></pre>
    </td>
  </tr>
</table>

</div>
    
      <div class="method_details ">
  <h3 class="signature " id="AESGCMContentCipherBuilderV2-class_method">
  
    func <strong><span class='object_link'><a href="#AESGCMContentCipherBuilderV2-class_method" title="s3crypto.AESGCMContentCipherBuilderV2() (method)">AESGCMContentCipherBuilderV2</a></span></strong>(generator <span class='object_link'><a href="s3crypto/CipherDataGeneratorWithCEKAlg.html" title="s3crypto.CipherDataGeneratorWithCEKAlg (interface)">CipherDataGeneratorWithCEKAlg</a></span>) <span class='object_link'><a href="s3crypto/ContentCipherBuilder.html" title="s3crypto.ContentCipherBuilder (interface)">ContentCipherBuilder</a></span> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>AESGCMContentCipherBuilderV2 returns a new encryption only AES/GCM mode structure with a specific cipher data generator that will provide keys to be used for content encryption. This type is compatible with the V2 encryption client.</p>

<p>Note: This uses the Go stdlib AEAD implementation for AES/GCM. Due to this objects to be encrypted or decrypted will be fully loaded into memory before encryption or decryption can occur. Caution must be taken to avoid memory allocation failures.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


32
33
34</pre>
    </td>
    <td>
      <pre class="code"><span class="info file">// File 'service/s3/s3crypto/aes_gcm_content_cipher.go', line 32</span>

<div class="hljs"><span class="hljs-keyword">func</span> AESGCMContentCipherBuilderV2(generator CipherDataGeneratorWithCEKAlg) ContentCipherBuilder {
	<span class="hljs-keyword">return</span> gcmContentCipherBuilderV2{generator}
}</div></pre>
    </td>
  </tr>
</table>

</div>
    
      <div class="method_details ">
  <h3 class="signature " id="NewDecryptionClient-class_method">
  
    func <strong><span class='object_link'><a href="#NewDecryptionClient-class_method" title="s3crypto.NewDecryptionClient() (method)">NewDecryptionClient</a></span></strong>(prov client.ConfigProvider, options ...func(*<span class='object_link'><a href="s3crypto/DecryptionClient.html" title="s3crypto.DecryptionClient (struct)">DecryptionClient</a></span>)) *<span class='object_link'><a href="s3crypto/DecryptionClient.html" title="s3crypto.DecryptionClient (struct)">DecryptionClient</a></span> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>NewDecryptionClient instantiates a new S3 crypto client</p>

<p>Example:  sess := session.Must(session.NewSession())  svc := s3crypto.NewDecryptionClient(sess, func(svc *s3crypto.DecryptionClient{  // Custom client options here  }))</p>

<p>deprecated: This feature is in maintenance mode, no new updates will be released. Please see <a href="https://docs.aws.amazon.com/general/latest/gr/aws_sdk_cryptography.html">docs.aws.amazon.com/general/latest/gr/aws_sdk_cryptography.html</a> for more information.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80</pre>
    </td>
    <td>
      <pre class="code"><span class="info file">// File 'service/s3/s3crypto/decryption_client.go', line 49</span>

<div class="hljs"><span class="hljs-keyword">func</span> NewDecryptionClient(prov client.ConfigProvider, options ...<span class="hljs-keyword">func</span>(*DecryptionClient)) *DecryptionClient {
	s3client := s3.New(prov)

	s3client.Handlers.Build.PushBack(<span class="hljs-keyword">func</span>(r *request.Request) {
		request.AddToUserAgent(r, <span class="hljs-string">"S3CryptoV1n"</span>)
	})

	kmsClient := kms.New(prov)
	client := &DecryptionClient{
		S3Client: s3client,
		LoadStrategy: defaultV2LoadStrategy{
			client: s3client,
		},
		WrapRegistry: <span class="hljs-keyword">map</span>[<span class="hljs-constant">string</span>]WrapEntry{
			KMSWrap:        NewKMSWrapEntry(kmsClient),
			KMSContextWrap: newKMSContextWrapEntryWithAnyCMK(kmsClient),
		},
		CEKRegistry: <span class="hljs-keyword">map</span>[<span class="hljs-constant">string</span>]CEKEntry{
			AESGCMNoPadding:                    newAESGCMContentCipher,
			AESCBC + <span class="hljs-string">"/"</span> + AESCBCPadder.Name(): newAESCBCContentCipher,
		},
		PadderRegistry: <span class="hljs-keyword">map</span>[<span class="hljs-constant">string</span>]Padder{
			AESCBC + <span class="hljs-string">"/"</span> + AESCBCPadder.Name(): AESCBCPadder,
			NoPadder.Name():                    NoPadder,
		},
	}
	<span class="hljs-keyword">for</span> _, option := <span class="hljs-keyword">range</span> options {
		option(client)
	}

	<span class="hljs-keyword">return</span> client
}</div></pre>
    </td>
  </tr>
</table>

</div>
    
      <div class="method_details ">
  <h3 class="signature " id="NewEncryptionClient-class_method">
  
    func <strong><span class='object_link'><a href="#NewEncryptionClient-class_method" title="s3crypto.NewEncryptionClient() (method)">NewEncryptionClient</a></span></strong>(prov client.ConfigProvider, builder <span class='object_link'><a href="s3crypto/ContentCipherBuilder.html" title="s3crypto.ContentCipherBuilder (interface)">ContentCipherBuilder</a></span>, options ...func(*<span class='object_link'><a href="s3crypto/EncryptionClient.html" title="s3crypto.EncryptionClient (struct)">EncryptionClient</a></span>)) *<span class='object_link'><a href="s3crypto/EncryptionClient.html" title="s3crypto.EncryptionClient (struct)">EncryptionClient</a></span> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>NewEncryptionClient instantiates a new S3 crypto client</p>

<p>Example:  cmkID := “arn:aws:kms:region:000000000000:key/00000000-0000-0000-0000-000000000000”  sess := session.Must(session.NewSession())  handler := s3crypto.NewKMSKeyGenerator(kms.New(sess), cmkID)  svc := s3crypto.NewEncryptionClient(sess, s3crypto.AESGCMContentCipherBuilder(handler))</p>

<p>deprecated: This feature is in maintenance mode, no new updates will be released. Please see <a href="https://docs.aws.amazon.com/general/latest/gr/aws_sdk_cryptography.html">docs.aws.amazon.com/general/latest/gr/aws_sdk_cryptography.html</a> for more information.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77</pre>
    </td>
    <td>
      <pre class="code"><span class="info file">// File 'service/s3/s3crypto/encryption_client.go', line 58</span>

<div class="hljs"><span class="hljs-keyword">func</span> NewEncryptionClient(prov client.ConfigProvider, builder ContentCipherBuilder, options ...<span class="hljs-keyword">func</span>(*EncryptionClient)) *EncryptionClient {
	s3client := s3.New(prov)

	s3client.Handlers.Build.PushBack(<span class="hljs-keyword">func</span>(r *request.Request) {
		request.AddToUserAgent(r, <span class="hljs-string">"S3CryptoV1n"</span>)
	})

	client := &EncryptionClient{
		S3Client:             s3client,
		ContentCipherBuilder: builder,
		SaveStrategy:         HeaderV2SaveStrategy{},
		MinFileSize:          DefaultMinFileSize,
	}

	<span class="hljs-keyword">for</span> _, option := <span class="hljs-keyword">range</span> options {
		option(client)
	}

	<span class="hljs-keyword">return</span> client
}</div></pre>
    </td>
  </tr>
</table>

</div>
    
      <div class="method_details ">
  <h3 class="signature " id="NewKMSContextKeyGenerator-class_method">
  
    func <strong><span class='object_link'><a href="#NewKMSContextKeyGenerator-class_method" title="s3crypto.NewKMSContextKeyGenerator() (method)">NewKMSContextKeyGenerator</a></span></strong>(client kmsiface.KMSAPI, cmkID string, matdesc <span class='object_link'><a href="s3crypto/MaterialDescription.html" title="s3crypto.MaterialDescription (struct)">MaterialDescription</a></span>) <span class='object_link'><a href="s3crypto/CipherDataGeneratorWithCEKAlg.html" title="s3crypto.CipherDataGeneratorWithCEKAlg (interface)">CipherDataGeneratorWithCEKAlg</a></span> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>NewKMSContextKeyGenerator builds a new kms+context key provider using the customer key ID and material description.</p>

<p>Example:  sess := session.Must(session.NewSession())  cmkID := “KMS Key ARN”  var matdesc s3crypto.MaterialDescription  handler := s3crypto.NewKMSContextKeyGenerator(kms.New(sess), cmkID, matdesc)</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


27
28
29</pre>
    </td>
    <td>
      <pre class="code"><span class="info file">// File 'service/s3/s3crypto/kms_context_key_handler.go', line 27</span>

<div class="hljs"><span class="hljs-keyword">func</span> NewKMSContextKeyGenerator(client kmsiface.KMSAPI, cmkID <span class="hljs-constant">string</span>, matdesc MaterialDescription) CipherDataGeneratorWithCEKAlg {
	<span class="hljs-keyword">return</span> newKMSContextKeyHandler(client, cmkID, matdesc)
}</div></pre>
    </td>
  </tr>
</table>

</div>
    
      <div class="method_details ">
  <h3 class="signature " id="NewKMSKeyGenerator-class_method">
  
    func <strong><span class='object_link'><a href="#NewKMSKeyGenerator-class_method" title="s3crypto.NewKMSKeyGenerator() (method)">NewKMSKeyGenerator</a></span></strong>(kmsClient kmsiface.KMSAPI, cmkID string) <span class='object_link'><a href="s3crypto/CipherDataGenerator.html" title="s3crypto.CipherDataGenerator (interface)">CipherDataGenerator</a></span> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>NewKMSKeyGenerator builds a new KMS key provider using the customer key ID and material description.</p>

<p>Example:  sess := session.Must(session.NewSession())  cmkID := “arn to key”  matdesc := s3crypto.MaterialDescription{}  handler := s3crypto.NewKMSKeyGenerator(kms.New(sess), cmkID)</p>

<p>deprecated: This feature is in maintenance mode, no new updates will be released. Please see <a href="https://docs.aws.amazon.com/general/latest/gr/aws_sdk_cryptography.html">docs.aws.amazon.com/general/latest/gr/aws_sdk_cryptography.html</a> for more information.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


35
36
37</pre>
    </td>
    <td>
      <pre class="code"><span class="info file">// File 'service/s3/s3crypto/kms_key_handler.go', line 35</span>

<div class="hljs"><span class="hljs-keyword">func</span> NewKMSKeyGenerator(kmsClient kmsiface.KMSAPI, cmkID <span class="hljs-constant">string</span>) CipherDataGenerator {
	<span class="hljs-keyword">return</span> NewKMSKeyGeneratorWithMatDesc(kmsClient, cmkID, MaterialDescription{})
}</div></pre>
    </td>
  </tr>
</table>

</div>
    
      <div class="method_details ">
  <h3 class="signature " id="NewKMSKeyGeneratorWithMatDesc-class_method">
  
    func <strong><span class='object_link'><a href="#NewKMSKeyGeneratorWithMatDesc-class_method" title="s3crypto.NewKMSKeyGeneratorWithMatDesc() (method)">NewKMSKeyGeneratorWithMatDesc</a></span></strong>(kmsClient kmsiface.KMSAPI, cmkID string, matdesc <span class='object_link'><a href="s3crypto/MaterialDescription.html" title="s3crypto.MaterialDescription (struct)">MaterialDescription</a></span>) <span class='object_link'><a href="s3crypto/CipherDataGenerator.html" title="s3crypto.CipherDataGenerator (interface)">CipherDataGenerator</a></span> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>NewKMSKeyGeneratorWithMatDesc builds a new KMS key provider using the customer key ID and material description.</p>

<p>Example:  sess := session.Must(session.NewSession())  cmkID := “arn to key”  matdesc := s3crypto.MaterialDescription{}  handler := s3crypto.NewKMSKeyGeneratorWithMatDesc(kms.New(sess), cmkID, matdesc)</p>

<p>deprecated: This feature is in maintenance mode, no new updates will be released. Please see <a href="https://docs.aws.amazon.com/general/latest/gr/aws_sdk_cryptography.html">docs.aws.amazon.com/general/latest/gr/aws_sdk_cryptography.html</a> for more information.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


68
69
70</pre>
    </td>
    <td>
      <pre class="code"><span class="info file">// File 'service/s3/s3crypto/kms_key_handler.go', line 68</span>

<div class="hljs"><span class="hljs-keyword">func</span> NewKMSKeyGeneratorWithMatDesc(kmsClient kmsiface.KMSAPI, cmkID <span class="hljs-constant">string</span>, matdesc MaterialDescription) CipherDataGenerator {
	<span class="hljs-keyword">return</span> newKMSKeyHandler(kmsClient, cmkID, matdesc)
}</div></pre>
    </td>
  </tr>
</table>

</div>
    
      <div class="method_details ">
  <h3 class="signature " id="NewKMSWrapEntry-class_method">
  
    func <strong><span class='object_link'><a href="#NewKMSWrapEntry-class_method" title="s3crypto.NewKMSWrapEntry() (method)">NewKMSWrapEntry</a></span></strong>(kmsClient kmsiface.KMSAPI) WrapEntry 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>NewKMSWrapEntry builds returns a new KMS key provider and its decrypt handler.</p>

<p>Example:  sess := session.Must(session.NewSession())  customKMSClient := kms.New(sess)  decryptHandler := s3crypto.NewKMSWrapEntry(customKMSClient)</p>

<pre class="code go"><code class="go"><div class="hljs">svc := s3crypto.NewDecryptionClient(sess, <span class="hljs-keyword">func</span>(svc *s3crypto.DecryptionClient) {
	svc.WrapRegistry[s3crypto.KMSWrap] = decryptHandler
}))
</div></code></pre>

<p>deprecated: This feature is in maintenance mode, no new updates will be released. Please see <a href="https://docs.aws.amazon.com/general/latest/gr/aws_sdk_cryptography.html">docs.aws.amazon.com/general/latest/gr/aws_sdk_cryptography.html</a> for more information.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


84
85
86
87</pre>
    </td>
    <td>
      <pre class="code"><span class="info file">// File 'service/s3/s3crypto/kms_key_handler.go', line 84</span>

<div class="hljs"><span class="hljs-keyword">func</span> NewKMSWrapEntry(kmsClient kmsiface.KMSAPI) WrapEntry {
	kp := newKMSWrapEntry(kmsClient)
	<span class="hljs-keyword">return</span> kp.decryptHandler
}</div></pre>
    </td>
  </tr>
</table>

</div>
    
      <div class="method_details ">
  <h3 class="signature " id="NewPKCS7Padder-class_method">
  
    func <strong><span class='object_link'><a href="#NewPKCS7Padder-class_method" title="s3crypto.NewPKCS7Padder() (method)">NewPKCS7Padder</a></span></strong>(blockSize int) <span class='object_link'><a href="s3crypto/Padder.html" title="s3crypto.Padder (interface)">Padder</a></span> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>NewPKCS7Padder follows the RFC 2315: <a href="https://www.ietf.org/rfc/rfc2315.txt">www.ietf.org/rfc/rfc2315.txt</a> PKCS7 padding is subject to side-channel attacks and timing attacks. For the most secure data, use an authenticated crypto algorithm.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


24
25
26</pre>
    </td>
    <td>
      <pre class="code"><span class="info file">// File 'service/s3/s3crypto/pkcs7_padder.go', line 24</span>

<div class="hljs"><span class="hljs-keyword">func</span> NewPKCS7Padder(blockSize <span class="hljs-constant">int</span>) Padder {
	<span class="hljs-keyword">return</span> pkcs7Padder{blockSize}
}</div></pre>
    </td>
  </tr>
</table>

</div>
    
      <div class="method_details ">
  <h3 class="signature " id="RegisterAESCBCContentCipher-class_method">
  
    func <strong><span class='object_link'><a href="#RegisterAESCBCContentCipher-class_method" title="s3crypto.RegisterAESCBCContentCipher() (method)">RegisterAESCBCContentCipher</a></span></strong>(registry *<span class='object_link'><a href="s3crypto/CryptoRegistry.html" title="s3crypto.CryptoRegistry (struct)">CryptoRegistry</a></span>, padder <span class='object_link'><a href="s3crypto/Padder.html" title="s3crypto.Padder (interface)">Padder</a></span>) error 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>RegisterAESCBCContentCipher registers the AES/CBC cipher and padder with the provided CryptoRegistry.</p>

<p>Example:  cr := s3crypto.NewCryptoRegistry()  if err := s3crypto.RegisterAESCBCContentCipher(cr, s3crypto.AESCBCPadder); err != nil {  panic(err) // handle error  }</p>

<p>deprecated: This feature is in maintenance mode, no new updates will be released. Please see <a href="https://docs.aws.amazon.com/general/latest/gr/aws_sdk_cryptography.html">docs.aws.amazon.com/general/latest/gr/aws_sdk_cryptography.html</a> for more information.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


33
34
35
36
37
38
39
40
41
42
43
44
45
46</pre>
    </td>
    <td>
      <pre class="code"><span class="info file">// File 'service/s3/s3crypto/aes_cbc_content_cipher.go', line 33</span>

<div class="hljs"><span class="hljs-keyword">func</span> RegisterAESCBCContentCipher(registry *CryptoRegistry, padder Padder) <span class="hljs-constant">error</span> {
	<span class="hljs-keyword">if</span> registry == <span class="hljs-constant">nil</span> {
		<span class="hljs-keyword">return</span> errNilCryptoRegistry
	}
	name := AESCBC + <span class="hljs-string">"/"</span> + padder.Name()
	err := registry.AddCEK(name, newAESCBCContentCipher)
	<span class="hljs-keyword">if</span> err != <span class="hljs-constant">nil</span> {
		<span class="hljs-keyword">return</span> err
	}
	<span class="hljs-keyword">if</span> err := registry.AddPadder(name, padder); err != <span class="hljs-constant">nil</span> {
		<span class="hljs-keyword">return</span> err
	}
	<span class="hljs-keyword">return</span> <span class="hljs-constant">nil</span>
}</div></pre>
    </td>
  </tr>
</table>

</div>
    
      <div class="method_details ">
  <h3 class="signature " id="RegisterAESGCMContentCipher-class_method">
  
    func <strong><span class='object_link'><a href="#RegisterAESGCMContentCipher-class_method" title="s3crypto.RegisterAESGCMContentCipher() (method)">RegisterAESGCMContentCipher</a></span></strong>(registry *<span class='object_link'><a href="s3crypto/CryptoRegistry.html" title="s3crypto.CryptoRegistry (struct)">CryptoRegistry</a></span>) error 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>RegisterAESGCMContentCipher registers the AES/GCM content cipher algorithm with the provided CryptoRegistry.</p>

<p>Example:  cr := s3crypto.NewCryptoRegistry()  if err := s3crypto.RegisterAESGCMContentCipher(cr); err != nil {  panic(err) // handle error  }</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65</pre>
    </td>
    <td>
      <pre class="code"><span class="info file">// File 'service/s3/s3crypto/aes_gcm_content_cipher.go', line 44</span>

<div class="hljs"><span class="hljs-keyword">func</span> RegisterAESGCMContentCipher(registry *CryptoRegistry) <span class="hljs-constant">error</span> {
	<span class="hljs-keyword">if</span> registry == <span class="hljs-constant">nil</span> {
		<span class="hljs-keyword">return</span> errNilCryptoRegistry
	}

	err := registry.AddCEK(AESGCMNoPadding, newAESGCMContentCipher)
	<span class="hljs-keyword">if</span> err != <span class="hljs-constant">nil</span> {
		<span class="hljs-keyword">return</span> err
	}

	<span class="hljs-comment">// NoPadder is generic but required by this algorithm, so if it is already registered and is the expected implementation</span>
	<span class="hljs-comment">// don't error.</span>
	padderName := NoPadder.Name()
	<span class="hljs-keyword">if</span> v, ok := registry.GetPadder(padderName); !ok {
		<span class="hljs-keyword">if</span> err := registry.AddPadder(padderName, NoPadder); err != <span class="hljs-constant">nil</span> {
			<span class="hljs-keyword">return</span> err
		}
	} <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> _, ok := v.(noPadder); !ok {
		<span class="hljs-keyword">return</span> fmt.Errorf(<span class="hljs-string">"%s is already registred but does not match expected type %T"</span>, padderName, NoPadder)
	}
	<span class="hljs-keyword">return</span> <span class="hljs-constant">nil</span>
}</div></pre>
    </td>
  </tr>
</table>

</div>
    
      <div class="method_details ">
  <h3 class="signature " id="RegisterKMSContextWrapWithAnyCMK-class_method">
  
    func <strong><span class='object_link'><a href="#RegisterKMSContextWrapWithAnyCMK-class_method" title="s3crypto.RegisterKMSContextWrapWithAnyCMK() (method)">RegisterKMSContextWrapWithAnyCMK</a></span></strong>(registry *<span class='object_link'><a href="s3crypto/CryptoRegistry.html" title="s3crypto.CryptoRegistry (struct)">CryptoRegistry</a></span>, client kmsiface.KMSAPI) error 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>RegisterKMSContextWrapWithAnyCMK registers the kms+context wrapping algorithm to the given WrapRegistry. The wrapper will be configured to call KMS decrypt without providing a CMK.</p>

<p>Example:  sess := session.Must(session.NewSession())  cr := s3crypto.NewCryptoRegistry()  if err := s3crypto.RegisterKMSContextWrapWithAnyCMK(cr, kms.New(sess)); err != nil {  panic(err) // handle error  }</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


55
56
57
58
59
60</pre>
    </td>
    <td>
      <pre class="code"><span class="info file">// File 'service/s3/s3crypto/kms_context_key_handler.go', line 55</span>

<div class="hljs"><span class="hljs-keyword">func</span> RegisterKMSContextWrapWithAnyCMK(registry *CryptoRegistry, client kmsiface.KMSAPI) <span class="hljs-constant">error</span> {
	<span class="hljs-keyword">if</span> registry == <span class="hljs-constant">nil</span> {
		<span class="hljs-keyword">return</span> errNilCryptoRegistry
	}
	<span class="hljs-keyword">return</span> registry.AddWrap(KMSContextWrap, newKMSContextWrapEntryWithAnyCMK(client))
}</div></pre>
    </td>
  </tr>
</table>

</div>
    
      <div class="method_details ">
  <h3 class="signature " id="RegisterKMSContextWrapWithCMK-class_method">
  
    func <strong><span class='object_link'><a href="#RegisterKMSContextWrapWithCMK-class_method" title="s3crypto.RegisterKMSContextWrapWithCMK() (method)">RegisterKMSContextWrapWithCMK</a></span></strong>(registry *<span class='object_link'><a href="s3crypto/CryptoRegistry.html" title="s3crypto.CryptoRegistry (struct)">CryptoRegistry</a></span>, client kmsiface.KMSAPI, cmkID string) error 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>RegisterKMSContextWrapWithCMK registers the kms+context wrapping algorithm to the given WrapRegistry. The wrapper will be configured to only call KMS Decrypt using the provided CMK.</p>

<p>Example:  cr := s3crypto.NewCryptoRegistry()  if err := RegisterKMSContextWrapWithCMK(); err != nil {  panic(err) // handle error  }</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


39
40
41
42
43
44</pre>
    </td>
    <td>
      <pre class="code"><span class="info file">// File 'service/s3/s3crypto/kms_context_key_handler.go', line 39</span>

<div class="hljs"><span class="hljs-keyword">func</span> RegisterKMSContextWrapWithCMK(registry *CryptoRegistry, client kmsiface.KMSAPI, cmkID <span class="hljs-constant">string</span>) <span class="hljs-constant">error</span> {
	<span class="hljs-keyword">if</span> registry == <span class="hljs-constant">nil</span> {
		<span class="hljs-keyword">return</span> errNilCryptoRegistry
	}
	<span class="hljs-keyword">return</span> registry.AddWrap(KMSContextWrap, newKMSContextWrapEntryWithCMK(client, cmkID))
}</div></pre>
    </td>
  </tr>
</table>

</div>
    
      <div class="method_details ">
  <h3 class="signature " id="RegisterKMSWrapWithAnyCMK-class_method">
  
    func <strong><span class='object_link'><a href="#RegisterKMSWrapWithAnyCMK-class_method" title="s3crypto.RegisterKMSWrapWithAnyCMK() (method)">RegisterKMSWrapWithAnyCMK</a></span></strong>(registry *<span class='object_link'><a href="s3crypto/CryptoRegistry.html" title="s3crypto.CryptoRegistry (struct)">CryptoRegistry</a></span>, client kmsiface.KMSAPI) error 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>RegisterKMSWrapWithAnyCMK registers the <code>kms</code> wrapping algorithm to the given WrapRegistry. The wrapper will be configured to call KMS Decrypt without providing a CMK.</p>

<p>Example:  sess := session.Must(session.NewSession())  cr := s3crypto.NewCryptoRegistry()  if err := s3crypto.RegisterKMSWrapWithAnyCMK(cr, kms.New(sess)); err != nil {  panic(err) // handle error  }</p>

<p>deprecated: This feature is in maintenance mode, no new updates will be released. Please see <a href="https://docs.aws.amazon.com/general/latest/gr/aws_sdk_cryptography.html">docs.aws.amazon.com/general/latest/gr/aws_sdk_cryptography.html</a> for more information.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


118
119
120
121
122
123</pre>
    </td>
    <td>
      <pre class="code"><span class="info file">// File 'service/s3/s3crypto/kms_key_handler.go', line 118</span>

<div class="hljs"><span class="hljs-keyword">func</span> RegisterKMSWrapWithAnyCMK(registry *CryptoRegistry, client kmsiface.KMSAPI) <span class="hljs-constant">error</span> {
	<span class="hljs-keyword">if</span> registry == <span class="hljs-constant">nil</span> {
		<span class="hljs-keyword">return</span> errNilCryptoRegistry
	}
	<span class="hljs-keyword">return</span> registry.AddWrap(KMSWrap, NewKMSWrapEntry(client))
}</div></pre>
    </td>
  </tr>
</table>

</div>
    
      <div class="method_details ">
  <h3 class="signature " id="RegisterKMSWrapWithCMK-class_method">
  
    func <strong><span class='object_link'><a href="#RegisterKMSWrapWithCMK-class_method" title="s3crypto.RegisterKMSWrapWithCMK() (method)">RegisterKMSWrapWithCMK</a></span></strong>(registry *<span class='object_link'><a href="s3crypto/CryptoRegistry.html" title="s3crypto.CryptoRegistry (struct)">CryptoRegistry</a></span>, client kmsiface.KMSAPI, cmkID string) error 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>RegisterKMSWrapWithCMK registers the <code>kms</code> wrapping algorithm to the given WrapRegistry. The wrapper will be configured to call KMS Decrypt with the provided CMK.</p>

<p>Example:  sess := session.Must(session.NewSession())  cr := s3crypto.NewCryptoRegistry()  if err := s3crypto.RegisterKMSWrapWithCMK(cr, kms.New(sess), “cmkId”); err != nil {  panic(err) // handle error  }</p>

<p>deprecated: This feature is in maintenance mode, no new updates will be released. Please see <a href="https://docs.aws.amazon.com/general/latest/gr/aws_sdk_cryptography.html">docs.aws.amazon.com/general/latest/gr/aws_sdk_cryptography.html</a> for more information.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


100
101
102
103
104
105</pre>
    </td>
    <td>
      <pre class="code"><span class="info file">// File 'service/s3/s3crypto/kms_key_handler.go', line 100</span>

<div class="hljs"><span class="hljs-keyword">func</span> RegisterKMSWrapWithCMK(registry *CryptoRegistry, client kmsiface.KMSAPI, cmkID <span class="hljs-constant">string</span>) <span class="hljs-constant">error</span> {
	<span class="hljs-keyword">if</span> registry == <span class="hljs-constant">nil</span> {
		<span class="hljs-keyword">return</span> errNilCryptoRegistry
	}
	<span class="hljs-keyword">return</span> registry.AddWrap(KMSWrap, newKMSWrapEntryWithCMK(client, cmkID))
}</div></pre>
    </td>
  </tr>
</table>

</div>
    
  </div>


      </div>

      <div id="footer">
  Generated on Fri Aug 12 08:04:37 2022 by
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.9.28 (ruby-2.7.0).
</div>

<!-- BEGIN-SECTION -->
<script type="text/javascript" src="https://media.amazonwebservices.com/amznUrchin.js"></script>
<!-- SiteCatalyst code version: H.25.2. Copyright 1996-2012 Adobe, Inc. All Rights Reserved.
More info available at http://www.omniture.com -->
<script language="JavaScript" type="text/javascript" src="https://media.amazonwebservices.com/js/sitecatalyst/s_code.min.js">
</script>
<script language="JavaScript" type="text/javascript">
  <!--
  s.prop66='AWS SDK for Go';
  s.eVar66='D=c66';
  s.prop65='API Reference';
  s.eVar65='D=c65';
  var s_code=s.t();if(s_code)document.write(s_code)
  //-->
</script>
<script language="JavaScript" type="text/javascript">
  <!--if(navigator.appVersion.indexOf('MSIE')>=0)document.write(unescape('%3C')+'\!-'+'-')
  //-->
</script>
<noscript>
  <img src="http://amazonwebservices.d2.sc.omtrdc.net/b/ss/awsamazondev/1/H.25.2--NS/0" height="1" width="1" border="0" alt="">
</noscript>
<!--/DO NOT REMOVE/-->
<!-- End SiteCatalyst code version: H.25.2. -->
<!-- END-SECTION -->

    </div>
  </body>
</html>
