<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>
  Struct: s3crypto.Envelope
  
    &mdash; IBM COS SDK for Go
  
</title>

  <link rel="stylesheet" href="../../../css/style.css" type="text/css" />

  <link rel="stylesheet" href="../../../css/common.css" type="text/css" />

  <link rel="stylesheet" href="../../../css/highlight.github.css" type="text/css" />

<script type="text/javascript">
  pathId = "service/s3/s3crypto.Envelope";
  relpath = '../../../';
</script>


  <script type="text/javascript" charset="utf-8" src="../../../js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="../../../js/app.js"></script>


  </head>
  <body>
    <div class="nav_wrap">
      <iframe id="nav" src="../../../package_list.html"></iframe>
      <div id="resizer"></div>
    </div>

    <div id="main" tabindex="-1">
      <div id="header">
        <div id="menu">
  
    <a href="../../../_index.html">Index (E)</a> &raquo;
    <span class='title'><span class='object_link'><a href="../../../service.html" title="service (package)">service</a></span></span> &raquo; <span class='title'><span class='object_link'><a href="../../s3.html" title="s3 (package)">s3</a></span></span> &raquo; <span class='title'><span class='object_link'><a href="../s3crypto.html" title="s3crypto (package)">s3crypto</a></span></span>
     &raquo; 
    <span class="title">Envelope</span>
  
</div>

        <div id="search">
  
    <a class="full_list_link" id="package_list_link"
        href="../../../package_list.html">

        <svg width="24" height="24">
          <rect x="0" y="4" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="12" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="20" width="24" height="4" rx="1" ry="1"></rect>
        </svg>
    </a>
  
</div>
        <div class="clear"></div>
      </div>

      <iframe id="search_frame"></iframe>

      <div id="content">
        <!--REGION_DISCLAIMER_DO_NOT_REMOVE-->
        <h1>Struct: s3crypto.Envelope
  
  
  
</h1>
<div class="package signature">
import "../ibm-cos-sdk-go/service/s3/s3crypto"
</div>
<h2>Overview</h2><div class="docstring">
  <div class="discussion">
    
<p>Envelope encryption starts off by generating a random symmetric key using AES GCM. The SDK generates a random IV based off the encryption cipher chosen. The master key that was provided, whether by the user or KMS, will be used to encrypt the randomly generated symmetric key and base64 encode the iv. This will allow for decryption of that same data later.</p>


  </div>
</div>
<div class="tags">
  

</div>

  <h3 class="inherited">Implemented Interfaces</h3>
  <p class="inherited"><span class='object_link'><a href="Cipher.html" title="s3crypto.Cipher (interface)">s3crypto.Cipher</a></span>, <span class='object_link'><a href="../s3manager/ReadSeekerWriteTo.html" title="s3manager.ReadSeekerWriteTo (interface)">s3manager.ReadSeekerWriteTo</a></span>, <span class='object_link'><a href="../s3manager/WriterReadFrom.html" title="s3manager.WriterReadFrom (interface)">s3manager.WriterReadFrom</a></span></p>


  

  







  <h2>
    Structure Field Summary
    <small><a href="#" class="summary_toggle">collapse</a></small>
  </h2>

  <ul class="summary">
    
      
<li class="public ">
  <span class="summary_signature"><span class='object_link'><a href="#CEKAlg-field" title="s3crypto.Envelope.CEKAlg (field)"><strong>CEKAlg</strong> string</a></span></span>
  
  
  
  
  
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>


    
      
<li class="public ">
  <span class="summary_signature"><span class='object_link'><a href="#CipherKey-field" title="s3crypto.Envelope.CipherKey (field)"><strong>CipherKey</strong> string</a></span></span>
  
  
  
  
  
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>CipherKey is the randomly generated cipher key.</p>
</div></span>
  
</li>


    
      
<li class="public ">
  <span class="summary_signature"><span class='object_link'><a href="#IV-field" title="s3crypto.Envelope.IV (field)"><strong>IV</strong> string</a></span></span>
  
  
  
  
  
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>IV is the randomly generated IV base64 encoded.</p>
</div></span>
  
</li>


    
      
<li class="public ">
  <span class="summary_signature"><span class='object_link'><a href="#MatDesc-field" title="s3crypto.Envelope.MatDesc (field)"><strong>MatDesc</strong> string</a></span></span>
  
  
  
  
  
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>MaterialDesc is a description to distinguish from other envelopes.</p>
</div></span>
  
</li>


    
      
<li class="public ">
  <span class="summary_signature"><span class='object_link'><a href="#TagLen-field" title="s3crypto.Envelope.TagLen (field)"><strong>TagLen</strong> string</a></span></span>
  
  
  
  
  
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>


    
      
<li class="public ">
  <span class="summary_signature"><span class='object_link'><a href="#UnencryptedContentLen-field" title="s3crypto.Envelope.UnencryptedContentLen (field)"><strong>UnencryptedContentLen</strong> string</a></span></span>
  
  
  
  
  
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>


    
      
<li class="public ">
  <span class="summary_signature"><span class='object_link'><a href="#UnencryptedMD5-field" title="s3crypto.Envelope.UnencryptedMD5 (field)"><strong>UnencryptedMD5</strong> string</a></span></span>
  
  
  
  
  
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>deprecated: This MD5 hash is no longer populated.</p>
</div></span>
  
</li>


    
      
<li class="public ">
  <span class="summary_signature"><span class='object_link'><a href="#WrapAlg-field" title="s3crypto.Envelope.WrapAlg (field)"><strong>WrapAlg</strong> string</a></span></span>
  
  
  
  
  
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>


    
  </ul>



  
    <h2>
      Method  Summary
      <small><a href="#" class="summary_toggle">collapse</a></small>
    </h2>

    <ul class="summary">
      
        
<li class="public ">
  <span class="summary_signature"><span class='object_link'><a href="#UnmarshalJSON-instance_method" title="s3crypto.Envelope.UnmarshalJSON() (method)">func (e *Envelope) <strong>UnmarshalJSON</strong>(value []byte) error </a></span></span>
  
  
  
  
  
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>UnmarshalJSON unmarshalls the given JSON bytes into Envelope.</p>
</div></span>
  
</li>


      
    </ul>
  




  <div id="type_details" class="method_details_list">
    <h2>Structure Field Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="CEKAlg-field">
  <strong>CEKAlg</strong> string 
  <code>`json:"x-amz-cek-alg"`</code>
</h3>

</div>
    
      <div class="method_details ">
  <h3 class="signature " id="CipherKey-field">
  <strong>CipherKey</strong> string 
  <code>`json:"x-amz-key-v2"`</code>
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>CipherKey is the randomly generated cipher key.</p>


  </div>
</div>
<div class="tags">
  

</div>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="IV-field">
  <strong>IV</strong> string 
  <code>`json:"x-amz-iv"`</code>
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>IV is the randomly generated IV base64 encoded.</p>


  </div>
</div>
<div class="tags">
  

</div>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="MatDesc-field">
  <strong>MatDesc</strong> string 
  <code>`json:"x-amz-matdesc"`</code>
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>MaterialDesc is a description to distinguish from other envelopes.</p>


  </div>
</div>
<div class="tags">
  

</div>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="TagLen-field">
  <strong>TagLen</strong> string 
  <code>`json:"x-amz-tag-len"`</code>
</h3>

</div>
    
      <div class="method_details ">
  <h3 class="signature " id="UnencryptedContentLen-field">
  <strong>UnencryptedContentLen</strong> string 
  <code>`json:"x-amz-unencrypted-content-length"`</code>
</h3>

</div>
    
      <div class="method_details ">
  <h3 class="signature " id="UnencryptedMD5-field">
  <strong>UnencryptedMD5</strong> string 
  <code>`json:"-"`</code>
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>deprecated: This MD5 hash is no longer populated</p>


  </div>
</div>
<div class="tags">
  

</div>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="WrapAlg-field">
  <strong>WrapAlg</strong> string 
  <code>`json:"x-amz-wrap-alg"`</code>
</h3>

</div>
    
  </div>


  <div id="Method_method_details" class="method_details_list">
    <h2>Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="UnmarshalJSON-instance_method">
  
    func (e *<span class='object_link'><a href="" title="s3crypto.Envelope (struct)">Envelope</a></span>) <strong><span class='object_link'><a href="#UnmarshalJSON-instance_method" title="s3crypto.Envelope.UnmarshalJSON() (method)">UnmarshalJSON</a></span></strong>(value []byte) error 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>UnmarshalJSON unmarshalls the given JSON bytes into Envelope</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74</pre>
    </td>
    <td>
      <pre class="code"><span class="info file">// File 'service/s3/s3crypto/envelope.go', line 48</span>

<div class="hljs"><span class="hljs-keyword">func</span> (e *Envelope) UnmarshalJSON(value []byte) <span class="hljs-constant">error</span> {
	<span class="hljs-keyword">type</span> StrictEnvelope Envelope
	<span class="hljs-keyword">type</span> LaxEnvelope <span class="hljs-keyword">struct</span> {
		StrictEnvelope
		TagLen                json.RawMessage <span class="hljs-string">`json:"x-amz-tag-len"`</span>
		UnencryptedContentLen json.RawMessage <span class="hljs-string">`json:"x-amz-unencrypted-content-length"`</span>
	}

	inner := LaxEnvelope{}
	err := json.Unmarshal(value, &inner)
	<span class="hljs-keyword">if</span> err != <span class="hljs-constant">nil</span> {
		<span class="hljs-keyword">return</span> err
	}
	*e = Envelope(inner.StrictEnvelope)

	e.TagLen, err = getJSONNumberAsString(inner.TagLen)
	<span class="hljs-keyword">if</span> err != <span class="hljs-constant">nil</span> {
		<span class="hljs-keyword">return</span> fmt.Errorf(<span class="hljs-string">"failed to parse tag length: %v"</span>, err)
	}

	e.UnencryptedContentLen, err = getJSONNumberAsString(inner.UnencryptedContentLen)
	<span class="hljs-keyword">if</span> err != <span class="hljs-constant">nil</span> {
		<span class="hljs-keyword">return</span> fmt.Errorf(<span class="hljs-string">"failed to parse unencrypted content length: %v"</span>, err)
	}

	<span class="hljs-keyword">return</span> <span class="hljs-constant">nil</span>
}</div></pre>
    </td>
  </tr>
</table>

</div>
    
  </div>


      </div>

      <div id="footer">
  Generated on Thu Jun  9 14:08:37 2022 by
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.9.28 (ruby-2.7.0).
</div>

<!-- BEGIN-SECTION -->
<script type="text/javascript" src="https://media.amazonwebservices.com/amznUrchin.js"></script>
<!-- SiteCatalyst code version: H.25.2. Copyright 1996-2012 Adobe, Inc. All Rights Reserved.
More info available at http://www.omniture.com -->
<script language="JavaScript" type="text/javascript" src="https://media.amazonwebservices.com/js/sitecatalyst/s_code.min.js">
</script>
<script language="JavaScript" type="text/javascript">
  <!--
  s.prop66='AWS SDK for Go';
  s.eVar66='D=c66';
  s.prop65='API Reference';
  s.eVar65='D=c65';
  var s_code=s.t();if(s_code)document.write(s_code)
  //-->
</script>
<script language="JavaScript" type="text/javascript">
  <!--if(navigator.appVersion.indexOf('MSIE')>=0)document.write(unescape('%3C')+'\!-'+'-')
  //-->
</script>
<noscript>
  <img src="http://amazonwebservices.d2.sc.omtrdc.net/b/ss/awsamazondev/1/H.25.2--NS/0" height="1" width="1" border="0" alt="">
</noscript>
<!--/DO NOT REMOVE/-->
<!-- End SiteCatalyst code version: H.25.2. -->
<!-- END-SECTION -->

    </div>
  </body>
</html>
