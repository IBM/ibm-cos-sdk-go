<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>
  Struct: request.Waiter
  
    &mdash; IBM COS SDK for Go
  
</title>

  <link rel="stylesheet" href="../../css/style.css" type="text/css" />

  <link rel="stylesheet" href="../../css/common.css" type="text/css" />

  <link rel="stylesheet" href="../../css/highlight.github.css" type="text/css" />

<script type="text/javascript">
  pathId = "aws/request.Waiter";
  relpath = '../../';
</script>


  <script type="text/javascript" charset="utf-8" src="../../js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="../../js/app.js"></script>


  </head>
  <body>
    <div class="nav_wrap">
      <iframe id="nav" src="../../package_list.html"></iframe>
      <div id="resizer"></div>
    </div>

    <div id="main" tabindex="-1">
      <div id="header">
        <div id="menu">
  
    <a href="../../_index.html">Index (W)</a> &raquo;
    <span class='title'><span class='object_link'><a href="../../aws.html" title="aws (package)">aws</a></span></span> &raquo; <span class='title'><span class='object_link'><a href="../request.html" title="request (package)">request</a></span></span>
     &raquo; 
    <span class="title">Waiter</span>
  
</div>

        <div id="search">
  
    <a class="full_list_link" id="package_list_link"
        href="../../package_list.html">

        <svg width="24" height="24">
          <rect x="0" y="4" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="12" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="20" width="24" height="4" rx="1" ry="1"></rect>
        </svg>
    </a>
  
</div>
        <div class="clear"></div>
      </div>

      <iframe id="search_frame"></iframe>

      <div id="content">
        <!--REGION_DISCLAIMER_DO_NOT_REMOVE-->
        <h1>Struct: request.Waiter
  
  
  
</h1>
<div class="package signature">
import "../ibm-cos-sdk-go/aws/request"
</div>
<h2>Overview</h2><div class="docstring">
  <div class="discussion">
    
<p>A Waiter provides the functionality to perform a blocking call which will wait for a resource state to be satisfied by a service.</p>

<p>This type should not be used directly. The API operations provided in the service packages prefixed with “WaitUntil” should be used instead.</p>


  </div>
</div>
<div class="tags">
  

</div>

  <h3 class="inherited">Implemented Interfaces</h3>
  <p class="inherited"><span class='object_link'><a href="../../service/s3/s3crypto/Cipher.html" title="s3crypto.Cipher (interface)">s3crypto.Cipher</a></span>, <span class='object_link'><a href="../../service/s3/s3manager/ReadSeekerWriteTo.html" title="s3manager.ReadSeekerWriteTo (interface)">s3manager.ReadSeekerWriteTo</a></span>, <span class='object_link'><a href="../../service/s3/s3manager/WriterReadFrom.html" title="s3manager.WriterReadFrom (interface)">s3manager.WriterReadFrom</a></span></p>


  

  







  <h2>
    Structure Field Summary
    <small><a href="#" class="summary_toggle">collapse</a></small>
  </h2>

  <ul class="summary">
    
      
<li class="public ">
  <span class="summary_signature"><span class='object_link'><a href="#Acceptors-field" title="request.Waiter.Acceptors (field)"><strong>Acceptors</strong> []WaiterAcceptor</a></span></span>
  
  
  
  
  
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>


    
      
<li class="public ">
  <span class="summary_signature"><span class='object_link'><a href="#Delay-field" title="request.Waiter.Delay (field)"><strong>Delay</strong> WaiterDelay</a></span></span>
  
  
  
  
  
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>


    
      
<li class="public ">
  <span class="summary_signature"><span class='object_link'><a href="#Logger-field" title="request.Waiter.Logger (field)"><strong>Logger</strong> aws.Logger</a></span></span>
  
  
  
  
  
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>


    
      
<li class="public ">
  <span class="summary_signature"><span class='object_link'><a href="#MaxAttempts-field" title="request.Waiter.MaxAttempts (field)"><strong>MaxAttempts</strong> int</a></span></span>
  
  
  
  
  
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>


    
      
<li class="public ">
  <span class="summary_signature"><span class='object_link'><a href="#Name-field" title="request.Waiter.Name (field)"><strong>Name</strong> string</a></span></span>
  
  
  
  
  
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>


    
      
<li class="public ">
  <span class="summary_signature"><span class='object_link'><a href="#RequestOptions-field" title="request.Waiter.RequestOptions (field)"><strong>RequestOptions</strong> []Option</a></span></span>
  
  
  
  
  
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>


    
  </ul>



  
    <h2>
      Method  Summary
      <small><a href="#" class="summary_toggle">collapse</a></small>
    </h2>

    <ul class="summary">
      
        
<li class="public ">
  <span class="summary_signature"><span class='object_link'><a href="#ApplyOptions-instance_method" title="request.Waiter.ApplyOptions() (method)">func (w *Waiter) <strong>ApplyOptions</strong>(opts ...WaiterOption) </a></span></span>
  
  
  
  
  
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>ApplyOptions updates the waiter with the list of waiter options provided.</p>
</div></span>
  
</li>


      
        
<li class="public ">
  <span class="summary_signature"><span class='object_link'><a href="#WaitWithContext-instance_method" title="request.Waiter.WaitWithContext() (method)">func (w Waiter) <strong>WaitWithContext</strong>(ctx aws.Context) error </a></span></span>
  
  
  
  
  
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>WaitWithContext will make requests for the API operation using NewRequest to build API requests.</p>
</div></span>
  
</li>


      
    </ul>
  




  <div id="type_details" class="method_details_list">
    <h2>Structure Field Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="Acceptors-field">
  <strong>Acceptors</strong> []<span class='object_link'><a href="WaiterAcceptor.html" title="request.WaiterAcceptor (struct)">WaiterAcceptor</a></span> 
  
</h3>

</div>
    
      <div class="method_details ">
  <h3 class="signature " id="Delay-field">
  <strong>Delay</strong> WaiterDelay 
  
</h3>

</div>
    
      <div class="method_details ">
  <h3 class="signature " id="Logger-field">
  <strong>Logger</strong> <span class='object_link'><a href="../Logger.html" title="aws.Logger (interface)">aws.Logger</a></span> 
  
</h3>

</div>
    
      <div class="method_details ">
  <h3 class="signature " id="MaxAttempts-field">
  <strong>MaxAttempts</strong> int 
  
</h3>

</div>
    
      <div class="method_details ">
  <h3 class="signature " id="Name-field">
  <strong>Name</strong> string 
  
</h3>

</div>
    
      <div class="method_details ">
  <h3 class="signature " id="RequestOptions-field">
  <strong>RequestOptions</strong> []Option 
  
</h3>

</div>
    
  </div>


  <div id="Method_method_details" class="method_details_list">
    <h2>Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="ApplyOptions-instance_method">
  
    func (w *<span class='object_link'><a href="" title="request.Waiter (struct)">Waiter</a></span>) <strong><span class='object_link'><a href="#ApplyOptions-instance_method" title="request.Waiter.ApplyOptions() (method)">ApplyOptions</a></span></strong>(opts ...WaiterOption) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>ApplyOptions updates the waiter with the list of waiter options provided.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


87
88
89
90
91</pre>
    </td>
    <td>
      <pre class="code"><span class="info file">// File 'aws/request/waiter.go', line 87</span>

<div class="hljs"><span class="hljs-keyword">func</span> (w *Waiter) ApplyOptions(opts ...WaiterOption) {
	<span class="hljs-keyword">for</span> _, fn := <span class="hljs-keyword">range</span> opts {
		fn(w)
	}
}</div></pre>
    </td>
  </tr>
</table>

</div>
    
      <div class="method_details ">
  <h3 class="signature " id="WaitWithContext-instance_method">
  
    func (w <span class='object_link'><a href="" title="request.Waiter (struct)">Waiter</a></span>) <strong><span class='object_link'><a href="#WaitWithContext-instance_method" title="request.Waiter.WaitWithContext() (method)">WaitWithContext</a></span></strong>(ctx <span class='object_link'><a href="../Context.html" title="aws.Context (interface)">aws.Context</a></span>) error 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>WaitWithContext will make requests for the API operation using NewRequest to build API requests. The request&#39;s response will be compared against the Waiter&#39;s Acceptors to determine the successful state of the resource the waiter is inspecting.</p>

<p>The passed in context must not be nil. If it is nil a panic will occur. The Context will be used to cancel the waiter&#39;s pending requests and retry delays. Use aws.BackgroundContext if no context is available.</p>

<p>The waiter will continue until the target state defined by the Acceptors, or the max attempts expires.</p>

<p>Will return the WaiterResourceNotReadyErrorCode error code if the waiter&#39;s retryer ShouldRetry returns false. This normally will happen when the max wait attempts expires.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


168
169
170
171
172
173
174
175
176
177
178
179
180
181
182
183
184
185
186
187
188
189
190
191
192
193
194
195
196
197
198
199
200
201
202
203
204
205
206
207
208
209
210
211</pre>
    </td>
    <td>
      <pre class="code"><span class="info file">// File 'aws/request/waiter.go', line 168</span>

<div class="hljs"><span class="hljs-keyword">func</span> (w Waiter) WaitWithContext(ctx aws.Context) <span class="hljs-constant">error</span> {

	<span class="hljs-keyword">for</span> attempt := 1; ; attempt++ {
		req, err := w.NewRequest(w.RequestOptions)
		<span class="hljs-keyword">if</span> err != <span class="hljs-constant">nil</span> {
			waiterLogf(w.Logger, <span class="hljs-string">"unable to create request %v"</span>, err)
			<span class="hljs-keyword">return</span> err
		}
		req.Handlers.Build.PushBack(MakeAddToUserAgentFreeFormHandler(<span class="hljs-string">"Waiter"</span>))
		err = req.Send()

		<span class="hljs-comment">// See if any of the acceptors match the request's response, or error</span>
		<span class="hljs-keyword">for</span> _, a := <span class="hljs-keyword">range</span> w.Acceptors {
			<span class="hljs-keyword">if</span> matched, matchErr := a.match(w.Name, w.Logger, req, err); matched {
				<span class="hljs-keyword">return</span> matchErr
			}
		}

		<span class="hljs-comment">// The Waiter should only check the resource state MaxAttempts times</span>
		<span class="hljs-comment">// This is here instead of in the for loop above to prevent delaying</span>
		<span class="hljs-comment">// unnecessary when the waiter will not retry.</span>
		<span class="hljs-keyword">if</span> attempt == w.MaxAttempts {
			<span class="hljs-keyword">break</span>
		}

		<span class="hljs-comment">// Delay to wait before inspecting the resource again</span>
		delay := w.Delay(attempt)
		<span class="hljs-keyword">if</span> sleepFn := req.Config.SleepDelay; sleepFn != <span class="hljs-constant">nil</span> {
			<span class="hljs-comment">// Support SleepDelay for backwards compatibility and testing</span>
			sleepFn(delay)
		} <span class="hljs-keyword">else</span> {
			sleepCtxFn := w.SleepWithContext
			<span class="hljs-keyword">if</span> sleepCtxFn == <span class="hljs-constant">nil</span> {
				sleepCtxFn = aws.SleepWithContext
			}

			<span class="hljs-keyword">if</span> err := sleepCtxFn(ctx, delay); err != <span class="hljs-constant">nil</span> {
				<span class="hljs-keyword">return</span> awserr.New(CanceledErrorCode, <span class="hljs-string">"waiter context canceled"</span>, err)
			}
		}
	}

	<span class="hljs-keyword">return</span> awserr.New(WaiterResourceNotReadyErrorCode, <span class="hljs-string">"exceeded wait attempts"</span>, <span class="hljs-constant">nil</span>)
}</div></pre>
    </td>
  </tr>
</table>

</div>
    
  </div>


      </div>

      <div id="footer">
  Generated on Mon Dec  2 19:19:47 2024 by
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.9.37 (ruby-2.7.0).
</div>

<!-- BEGIN-SECTION -->
<script type="text/javascript" src="https://media.amazonwebservices.com/amznUrchin.js"></script>
<!-- SiteCatalyst code version: H.25.2. Copyright 1996-2012 Adobe, Inc. All Rights Reserved.
More info available at http://www.omniture.com -->
<script language="JavaScript" type="text/javascript" src="https://media.amazonwebservices.com/js/sitecatalyst/s_code.min.js">
</script>
<script language="JavaScript" type="text/javascript">
  <!--
  s.prop66='AWS SDK for Go';
  s.eVar66='D=c66';
  s.prop65='API Reference';
  s.eVar65='D=c65';
  var s_code=s.t();if(s_code)document.write(s_code)
  //-->
</script>
<script language="JavaScript" type="text/javascript">
  <!--if(navigator.appVersion.indexOf('MSIE')>=0)document.write(unescape('%3C')+'\!-'+'-')
  //-->
</script>
<noscript>
  <img src="http://amazonwebservices.d2.sc.omtrdc.net/b/ss/awsamazondev/1/H.25.2--NS/0" height="1" width="1" border="0" alt="">
</noscript>
<!--/DO NOT REMOVE/-->
<!-- End SiteCatalyst code version: H.25.2. -->
<!-- END-SECTION -->

    </div>
  </body>
</html>
