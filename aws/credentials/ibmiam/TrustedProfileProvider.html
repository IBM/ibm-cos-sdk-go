<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>
  Struct: ibmiam.TrustedProfileProvider
  
    &mdash; IBM COS SDK for Go
  
</title>

  <link rel="stylesheet" href="../../../css/style.css" type="text/css" />

  <link rel="stylesheet" href="../../../css/common.css" type="text/css" />

  <link rel="stylesheet" href="../../../css/highlight.github.css" type="text/css" />

<script type="text/javascript">
  pathId = "aws/credentials/ibmiam.TrustedProfileProvider";
  relpath = '../../../';
</script>


  <script type="text/javascript" charset="utf-8" src="../../../js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="../../../js/app.js"></script>


  </head>
  <body>
    <div class="nav_wrap">
      <iframe id="nav" src="../../../package_list.html"></iframe>
      <div id="resizer"></div>
    </div>

    <div id="main" tabindex="-1">
      <div id="header">
        <div id="menu">
  
    <a href="../../../_index.html">Index (T)</a> &raquo;
    <span class='title'><span class='object_link'><a href="../../../aws.html" title="aws (package)">aws</a></span></span> &raquo; <span class='title'><span class='object_link'><a href="../../credentials.html" title="credentials (package)">credentials</a></span></span> &raquo; <span class='title'><span class='object_link'><a href="../ibmiam.html" title="ibmiam (package)">ibmiam</a></span></span>
     &raquo; 
    <span class="title">TrustedProfileProvider</span>
  
</div>

        <div id="search">
  
    <a class="full_list_link" id="package_list_link"
        href="../../../package_list.html">

        <svg width="24" height="24">
          <rect x="0" y="4" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="12" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="20" width="24" height="4" rx="1" ry="1"></rect>
        </svg>
    </a>
  
</div>
        <div class="clear"></div>
      </div>

      <iframe id="search_frame"></iframe>

      <div id="content">
        <!--REGION_DISCLAIMER_DO_NOT_REMOVE-->
        <h1>Struct: ibmiam.TrustedProfileProvider
  
  
  
</h1>
<div class="package signature">
import "../ibm-cos-sdk-go/aws/credentials/ibmiam"
</div>
<h2>Overview</h2><div class="docstring">
  <div class="discussion">
    
<p>Provider Struct</p>


  </div>
</div>
<div class="tags">
  

</div>

  <h3 class="inherited">Implemented Interfaces</h3>
  <p class="inherited"><span class='object_link'><a href="../../../service/s3/s3crypto/Cipher.html" title="s3crypto.Cipher (interface)">s3crypto.Cipher</a></span>, <span class='object_link'><a href="../Provider.html" title="credentials.Provider (interface)">credentials.Provider</a></span>, <span class='object_link'><a href="../../../service/s3/s3manager/ReadSeekerWriteTo.html" title="s3manager.ReadSeekerWriteTo (interface)">s3manager.ReadSeekerWriteTo</a></span>, <span class='object_link'><a href="../../../service/s3/s3manager/WriterReadFrom.html" title="s3manager.WriterReadFrom (interface)">s3manager.WriterReadFrom</a></span></p>


  

  







  <h2>
    Structure Field Summary
    <small><a href="#" class="summary_toggle">collapse</a></small>
  </h2>

  <ul class="summary">
    
      
<li class="public ">
  <span class="summary_signature"><span class='object_link'><a href="#ErrorStatus-field" title="ibmiam.TrustedProfileProvider.ErrorStatus (field)"><strong>ErrorStatus</strong> error</a></span></span>
  
  
  
  
  
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Error.</p>
</div></span>
  
</li>


    
  </ul>



  
    <h2>
      Constructor Functions
      <small><a href="#" class="summary_toggle">collapse</a></small>
    </h2>

    <ul class="summary">
      
        
<li class="public ">
  <span class="summary_signature"><span class='object_link'><a href="#NewEnvProviderTrustedProfile-class_method" title="ibmiam.TrustedProfileProvider.NewEnvProviderTrustedProfile() (method)">func <strong>NewEnvProviderTrustedProfile</strong>(config *aws.Config) *TrustedProfileProvider </a></span></span>
  
  
  
  
  
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>NewEnvProvider constructor of the IBM IAM provider that loads IAM trusted profile credentials from environment variables Parameter:.</p>
</div></span>
  
</li>


      
        
<li class="public ">
  <span class="summary_signature"><span class='object_link'><a href="#NewTrustedProfileProviderCR-class_method" title="ibmiam.TrustedProfileProvider.NewTrustedProfileProviderCR() (method)">func <strong>NewTrustedProfileProviderCR</strong>(config *aws.Config, authEndPoint string, trustedProfileID string, crTokenFilePath string, serviceInstanceID string) *TrustedProfileProvider </a></span></span>
  
  
  
  
  
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>NewTrustedProfileProviderWithCR constructor of the IBM IAM provider that uses IAM trusted-profile details passed Returns: New TrustedProfileProvider (AWS type).</p>
</div></span>
  
</li>


      
    </ul>
  
    <h2>
      Method  Summary
      <small><a href="#" class="summary_toggle">collapse</a></small>
    </h2>

    <ul class="summary">
      
        
<li class="public ">
  <span class="summary_signature"><span class='object_link'><a href="#IsExpired-instance_method" title="ibmiam.TrustedProfileProvider.IsExpired() (method)">func (p *TrustedProfileProvider) <strong>IsExpired</strong>() bool </a></span></span>
  
  
  
  
  
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>IsExpired …</p>
</div></span>
  
</li>


      
        
<li class="public ">
  <span class="summary_signature"><span class='object_link'><a href="#IsValid-instance_method" title="ibmiam.TrustedProfileProvider.IsValid() (method)">func (p *TrustedProfileProvider) <strong>IsValid</strong>() bool </a></span></span>
  
  
  
  
  
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>IsValid …</p>
</div></span>
  
</li>


      
        
<li class="public ">
  <span class="summary_signature"><span class='object_link'><a href="#Retrieve-instance_method" title="ibmiam.TrustedProfileProvider.Retrieve() (method)">func (p *TrustedProfileProvider) <strong>Retrieve</strong>() (credentials.Value, error) </a></span></span>
  
  
  
  
  
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Retrieve …</p>
</div></span>
  
</li>


      
    </ul>
  




  <div id="type_details" class="method_details_list">
    <h2>Structure Field Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="ErrorStatus-field">
  <strong>ErrorStatus</strong> error 
  
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Error</p>


  </div>
</div>
<div class="tags">
  

</div>
</div>
    
  </div>


  <div id="Function_method_details" class="method_details_list">
    <h2>Function Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="NewEnvProviderTrustedProfile-class_method">
  
    func <strong><span class='object_link'><a href="#NewEnvProviderTrustedProfile-class_method" title="ibmiam.TrustedProfileProvider.NewEnvProviderTrustedProfile() (method)">NewEnvProviderTrustedProfile</a></span></strong>(config *<span class='object_link'><a href="../../Config.html" title="aws.Config (struct)">aws.Config</a></span>) *<span class='object_link'><a href="" title="ibmiam.TrustedProfileProvider (struct)">TrustedProfileProvider</a></span> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>NewEnvProvider constructor of the IBM IAM provider that loads IAM trusted profile credentials from environment variables Parameter:</p>

<pre class="code go"><code class="go"><div class="hljs">AWS Config
</div></code></pre>

<p>Returns:</p>

<pre class="code go"><code class="go"><div class="hljs">A new provider with AWS config, Trusted Profile ID, CR token file path, IBM IAM Authentication Server Endpo<span class="hljs-constant">int</span> and
Service Instance ID
</div></code></pre>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


23
24
25
26
27
28
29
30</pre>
    </td>
    <td>
      <pre class="code"><span class="info file">// File 'aws/credentials/ibmiam/env_provider_trusted_profile.go', line 23</span>

<div class="hljs"><span class="hljs-keyword">func</span> NewEnvProviderTrustedProfile(config *aws.Config) *TrustedProfileProvider {
	trustedProfileID := os.Getenv(<span class="hljs-string">"TRUSTED_PROFILE_ID"</span>)
	serviceInstanceID := os.Getenv(<span class="hljs-string">"IBM_SERVICE_INSTANCE_ID"</span>)
	crTokenFilePath := os.Getenv(<span class="hljs-string">"CR_TOKEN_FILE_PATH"</span>)
	authEndPo<span class="hljs-constant">int</span> := os.Getenv(<span class="hljs-string">"IBM_AUTH_ENDPOINT"</span>)

	<span class="hljs-keyword">return</span> NewTrustedProfileProvider(EnvProviderTrustedProfileName, config, authEndPo<span class="hljs-constant">int</span>, trustedProfileID, crTokenFilePath, serviceInstanceID, <span class="hljs-string">"CR"</span>)
}</div></pre>
    </td>
  </tr>
</table>

</div>
    
      <div class="method_details ">
  <h3 class="signature " id="NewTrustedProfileProviderCR-class_method">
  
    func <strong><span class='object_link'><a href="#NewTrustedProfileProviderCR-class_method" title="ibmiam.TrustedProfileProvider.NewTrustedProfileProviderCR() (method)">NewTrustedProfileProviderCR</a></span></strong>(config *<span class='object_link'><a href="../../Config.html" title="aws.Config (struct)">aws.Config</a></span>, authEndPoint string, trustedProfileID string, crTokenFilePath string, serviceInstanceID string) *<span class='object_link'><a href="" title="ibmiam.TrustedProfileProvider (struct)">TrustedProfileProvider</a></span> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>NewTrustedProfileProviderWithCR constructor of the IBM IAM provider that uses IAM trusted-profile details passed Returns: New TrustedProfileProvider (AWS type)</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


19
20
21
22
23</pre>
    </td>
    <td>
      <pre class="code"><span class="info file">// File 'aws/credentials/ibmiam/trusted_profile_provider.go', line 19</span>

<div class="hljs"><span class="hljs-keyword">func</span> NewTrustedProfileProviderCR(config *aws.Config, authEndPo<span class="hljs-constant">int</span> <span class="hljs-constant">string</span>, trustedProfileID <span class="hljs-constant">string</span>, crTokenFilePath <span class="hljs-constant">string</span>, serviceInstanceID <span class="hljs-constant">string</span>) *TrustedProfileProvider {
	<span class="hljs-comment">// Resource type ResourceComputeResource is passed to identify that this is a CR-token based</span>
	<span class="hljs-comment">// resource.</span>
	<span class="hljs-keyword">return</span> NewTrustedProfileProvider(TrustedProfileProviderName, config, authEndPo<span class="hljs-constant">int</span>, trustedProfileID, crTokenFilePath, serviceInstanceID, <span class="hljs-constant">string</span>(ResourceComputeResource))
}</div></pre>
    </td>
  </tr>
</table>

</div>
    
  </div>

  <div id="Method_method_details" class="method_details_list">
    <h2>Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="IsExpired-instance_method">
  
    func (p *<span class='object_link'><a href="" title="ibmiam.TrustedProfileProvider (struct)">TrustedProfileProvider</a></span>) <strong><span class='object_link'><a href="#IsExpired-instance_method" title="ibmiam.TrustedProfileProvider.IsExpired() (method)">IsExpired</a></span></strong>() bool 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>IsExpired …</p>

<pre class="code go"><code class="go"><div class="hljs">TrustedProfileProvider expired or not - boolean
</div></code></pre>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


155
156
157</pre>
    </td>
    <td>
      <pre class="code"><span class="info file">// File 'aws/credentials/ibmiam/trusted_profile.go', line 155</span>

<div class="hljs"><span class="hljs-keyword">func</span> (p *TrustedProfileProvider) IsExpired() <span class="hljs-constant">bool</span> {
	<span class="hljs-keyword">return</span> <span class="hljs-constant">true</span>
}</div></pre>
    </td>
  </tr>
</table>

</div>
    
      <div class="method_details ">
  <h3 class="signature " id="IsValid-instance_method">
  
    func (p *<span class='object_link'><a href="" title="ibmiam.TrustedProfileProvider (struct)">TrustedProfileProvider</a></span>) <strong><span class='object_link'><a href="#IsValid-instance_method" title="ibmiam.TrustedProfileProvider.IsValid() (method)">IsValid</a></span></strong>() bool 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>IsValid … Returns:</p>

<pre class="code go"><code class="go"><div class="hljs">TrustedProfileProvider validation - boolean
</div></code></pre>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


110
111
112</pre>
    </td>
    <td>
      <pre class="code"><span class="info file">// File 'aws/credentials/ibmiam/trusted_profile.go', line 110</span>

<div class="hljs"><span class="hljs-keyword">func</span> (p *TrustedProfileProvider) IsValid() <span class="hljs-constant">bool</span> {
	<span class="hljs-keyword">return</span> <span class="hljs-constant">nil</span> == p.ErrorStatus
}</div></pre>
    </td>
  </tr>
</table>

</div>
    
      <div class="method_details ">
  <h3 class="signature " id="Retrieve-instance_method">
  
    func (p *<span class='object_link'><a href="" title="ibmiam.TrustedProfileProvider (struct)">TrustedProfileProvider</a></span>) <strong><span class='object_link'><a href="#Retrieve-instance_method" title="ibmiam.TrustedProfileProvider.Retrieve() (method)">Retrieve</a></span></strong>() (<span class='object_link'><a href="../Value.html" title="credentials.Value (struct)">credentials.Value</a></span>, error) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Retrieve … Returns:</p>

<pre class="code go"><code class="go"><div class="hljs">Credential values
Error
</div></code></pre>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150</pre>
    </td>
    <td>
      <pre class="code"><span class="info file">// File 'aws/credentials/ibmiam/trusted_profile.go', line 119</span>

<div class="hljs"><span class="hljs-keyword">func</span> (p *TrustedProfileProvider) Retrieve() (credentials.Value, <span class="hljs-constant">error</span>) {
	<span class="hljs-keyword">if</span> p.ErrorStatus != <span class="hljs-constant">nil</span> {
		<span class="hljs-keyword">if</span> p.logLevel.Matches(aws.LogDebug) {
			p.logger.Log(debugLog, ibmiamProviderLog, p.providerName, p.ErrorStatus)
		}
		<span class="hljs-keyword">return</span> credentials.Value{ProviderName: p.providerName}, p.ErrorStatus
	}

	<span class="hljs-comment">// The respective resourceTypes's class should be called based on the resourceType parameter.</span>
	<span class="hljs-comment">// Since only cr-token based resources is supported now, it is assigned to ContainerAuthenticator</span>
	<span class="hljs-comment">// directly. when other resource types are supported, the respective class should be used accordingly.</span>
	tokenValue, err := p.authenticator.(*core.ContainerAuthenticator).GetToken()

	<span class="hljs-keyword">if</span> err != <span class="hljs-constant">nil</span> {
		<span class="hljs-keyword">var</span> returnErr <span class="hljs-constant">error</span>
		<span class="hljs-keyword">if</span> p.logLevel.Matches(aws.LogDebug) {
			p.logger.Log(debugLog, ibmiamProviderLog, p.providerName, <span class="hljs-string">"ERROR ON GET"</span>, err)
		}
		returnErr = awserr.New(<span class="hljs-string">"TokenManagerRetrieveError"</span>, <span class="hljs-string">"error retrieving the token"</span>, err)
		<span class="hljs-keyword">return</span> credentials.Value{}, returnErr
	}

	<span class="hljs-keyword">return</span> credentials.Value{
		Token: token.Token{
			AccessToken: tokenValue,
			TokenType:   <span class="hljs-string">"Bearer"</span>,
		},
		ProviderName:      p.providerName,
		ProviderType:      p.providerType,
		ServiceInstanceID: p.serviceInstanceID,
	}, <span class="hljs-constant">nil</span>
}</div></pre>
    </td>
  </tr>
</table>

</div>
    
  </div>


      </div>

      <div id="footer">
  Generated on Tue Jun 18 12:20:31 2024 by
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.9.36 (ruby-2.7.0).
</div>

<!-- BEGIN-SECTION -->
<script type="text/javascript" src="https://media.amazonwebservices.com/amznUrchin.js"></script>
<!-- SiteCatalyst code version: H.25.2. Copyright 1996-2012 Adobe, Inc. All Rights Reserved.
More info available at http://www.omniture.com -->
<script language="JavaScript" type="text/javascript" src="https://media.amazonwebservices.com/js/sitecatalyst/s_code.min.js">
</script>
<script language="JavaScript" type="text/javascript">
  <!--
  s.prop66='AWS SDK for Go';
  s.eVar66='D=c66';
  s.prop65='API Reference';
  s.eVar65='D=c65';
  var s_code=s.t();if(s_code)document.write(s_code)
  //-->
</script>
<script language="JavaScript" type="text/javascript">
  <!--if(navigator.appVersion.indexOf('MSIE')>=0)document.write(unescape('%3C')+'\!-'+'-')
  //-->
</script>
<noscript>
  <img src="http://amazonwebservices.d2.sc.omtrdc.net/b/ss/awsamazondev/1/H.25.2--NS/0" height="1" width="1" border="0" alt="">
</noscript>
<!--/DO NOT REMOVE/-->
<!-- End SiteCatalyst code version: H.25.2. -->
<!-- END-SECTION -->

    </div>
  </body>
</html>
