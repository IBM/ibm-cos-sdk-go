<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>
  Struct: credentials.ChainProvider
  
    &mdash; IBM COS SDK for Go
  
</title>

  <link rel="stylesheet" href="../../css/style.css" type="text/css" />

  <link rel="stylesheet" href="../../css/common.css" type="text/css" />

  <link rel="stylesheet" href="../../css/highlight.github.css" type="text/css" />

<script type="text/javascript">
  pathId = "aws/credentials.ChainProvider";
  relpath = '../../';
</script>


  <script type="text/javascript" charset="utf-8" src="../../js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="../../js/app.js"></script>


  </head>
  <body>
    <div class="nav_wrap">
      <iframe id="nav" src="../../package_list.html"></iframe>
      <div id="resizer"></div>
    </div>

    <div id="main" tabindex="-1">
      <div id="header">
        <div id="menu">
  
    <a href="../../_index.html">Index (C)</a> &raquo;
    <span class='title'><span class='object_link'><a href="../../aws.html" title="aws (package)">aws</a></span></span> &raquo; <span class='title'><span class='object_link'><a href="../credentials.html" title="credentials (package)">credentials</a></span></span>
     &raquo; 
    <span class="title">ChainProvider</span>
  
</div>

        <div id="search">
  
    <a class="full_list_link" id="package_list_link"
        href="../../package_list.html">

        <svg width="24" height="24">
          <rect x="0" y="4" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="12" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="20" width="24" height="4" rx="1" ry="1"></rect>
        </svg>
    </a>
  
</div>
        <div class="clear"></div>
      </div>

      <iframe id="search_frame"></iframe>

      <div id="content">
        <!--REGION_DISCLAIMER_DO_NOT_REMOVE-->
        <h1>Struct: credentials.ChainProvider
  
  
  
</h1>
<div class="package signature">
import "../ibm-cos-sdk-go/aws/credentials"
</div>
<h2>Overview</h2><div class="docstring">
  <div class="discussion">
    
<p>A ChainProvider will search for a provider which returns credentials and cache that provider until Retrieve is called again.</p>

<p>The ChainProvider provides a way of chaining multiple providers together which will pick the first available using priority order of the Providers in the list.</p>

<p>If none of the Providers retrieve valid credentials Value, ChainProvider&#39;s Retrieve() will return the error ErrNoValidProvidersFoundInChain.</p>

<p>If a Provider is found which returns valid credentials Value ChainProvider will cache that Provider for all calls to IsExpired(), until Retrieve is called again.</p>

<p>Example of ChainProvider to be used with an EnvProvider and EC2RoleProvider. In this example EnvProvider will first check if any credentials are available via the environment variables. If there are none ChainProvider will check the next Provider in the list, EC2RoleProvider in this case. If EC2RoleProvider does not return any credentials ChainProvider will return the error ErrNoValidProvidersFoundInChain</p>

<pre class="code go"><code class="go"><div class="hljs">creds := credentials.NewChainCredentials(
    []credentials.Provider{
        &credentials.EnvProvider{},
        &ec2rolecreds.EC2RoleProvider{
            Client: ec2metadata.New(sess),
        },
    })

<span class="hljs-comment">// Usage of ChainCredentials with aws.Config</span>
svc := ec2.New(session.Must(session.NewSession(&aws.Config{
  Credentials: creds,
})))
</div></code></pre>


  </div>
</div>
<div class="tags">
  

</div>

  <h3 class="inherited">Implemented Interfaces</h3>
  <p class="inherited"><span class='object_link'><a href="../../service/s3/s3crypto/Cipher.html" title="s3crypto.Cipher (interface)">s3crypto.Cipher</a></span>, <span class='object_link'><a href="Provider.html" title="credentials.Provider (interface)">credentials.Provider</a></span>, <span class='object_link'><a href="../../service/s3/s3manager/ReadSeekerWriteTo.html" title="s3manager.ReadSeekerWriteTo (interface)">s3manager.ReadSeekerWriteTo</a></span>, <span class='object_link'><a href="../../service/s3/s3manager/WriterReadFrom.html" title="s3manager.WriterReadFrom (interface)">s3manager.WriterReadFrom</a></span></p>


  

  







  <h2>
    Structure Field Summary
    <small><a href="#" class="summary_toggle">collapse</a></small>
  </h2>

  <ul class="summary">
    
      
<li class="public ">
  <span class="summary_signature"><span class='object_link'><a href="#Providers-field" title="credentials.ChainProvider.Providers (field)"><strong>Providers</strong> []Provider</a></span></span>
  
  
  
  
  
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>


    
      
<li class="public ">
  <span class="summary_signature"><span class='object_link'><a href="#VerboseErrors-field" title="credentials.ChainProvider.VerboseErrors (field)"><strong>VerboseErrors</strong> bool</a></span></span>
  
  
  
  
  
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>


    
  </ul>



  
    <h2>
      Method  Summary
      <small><a href="#" class="summary_toggle">collapse</a></small>
    </h2>

    <ul class="summary">
      
        
<li class="public ">
  <span class="summary_signature"><span class='object_link'><a href="#IsExpired-instance_method" title="credentials.ChainProvider.IsExpired() (method)">func (c *ChainProvider) <strong>IsExpired</strong>() bool </a></span></span>
  
  
  
  
  
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>IsExpired will returned the expired state of the currently cached provider if there is one.</p>
</div></span>
  
</li>


      
        
<li class="public ">
  <span class="summary_signature"><span class='object_link'><a href="#Retrieve-instance_method" title="credentials.ChainProvider.Retrieve() (method)">func (c *ChainProvider) <strong>Retrieve</strong>() (Value, error) </a></span></span>
  
  
  
  
  
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Retrieve returns the credentials value or error if no provider returned without error.</p>
</div></span>
  
</li>


      
    </ul>
  




  <div id="type_details" class="method_details_list">
    <h2>Structure Field Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="Providers-field">
  <strong>Providers</strong> []<span class='object_link'><a href="Provider.html" title="credentials.Provider (interface)">Provider</a></span> 
  
</h3>

</div>
    
      <div class="method_details ">
  <h3 class="signature " id="VerboseErrors-field">
  <strong>VerboseErrors</strong> bool 
  
</h3>

</div>
    
  </div>


  <div id="Method_method_details" class="method_details_list">
    <h2>Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="IsExpired-instance_method">
  
    func (c *<span class='object_link'><a href="" title="credentials.ChainProvider (struct)">ChainProvider</a></span>) <strong><span class='object_link'><a href="#IsExpired-instance_method" title="credentials.ChainProvider.IsExpired() (method)">IsExpired</a></span></strong>() bool 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>IsExpired will returned the expired state of the currently cached provider if there is one. If there is no current provider, true will be returned.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


93
94
95
96
97
98
99</pre>
    </td>
    <td>
      <pre class="code"><span class="info file">// File 'aws/credentials/chain_provider.go', line 93</span>

<div class="hljs"><span class="hljs-keyword">func</span> (c *ChainProvider) IsExpired() <span class="hljs-constant">bool</span> {
	<span class="hljs-keyword">if</span> c.curr != <span class="hljs-constant">nil</span> {
		<span class="hljs-keyword">return</span> c.curr.IsExpired()
	}

	<span class="hljs-keyword">return</span> <span class="hljs-constant">true</span>
}</div></pre>
    </td>
  </tr>
</table>

</div>
    
      <div class="method_details ">
  <h3 class="signature " id="Retrieve-instance_method">
  
    func (c *<span class='object_link'><a href="" title="credentials.ChainProvider (struct)">ChainProvider</a></span>) <strong><span class='object_link'><a href="#Retrieve-instance_method" title="credentials.ChainProvider.Retrieve() (method)">Retrieve</a></span></strong>() (<span class='object_link'><a href="Value.html" title="credentials.Value (struct)">Value</a></span>, error) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Retrieve returns the credentials value or error if no provider returned without error.</p>

<p>If a provider is found it will be cached and any calls to IsExpired() will return the expired state of the cached provider.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89</pre>
    </td>
    <td>
      <pre class="code"><span class="info file">// File 'aws/credentials/chain_provider.go', line 71</span>

<div class="hljs"><span class="hljs-keyword">func</span> (c *ChainProvider) Retrieve() (Value, <span class="hljs-constant">error</span>) {
	<span class="hljs-keyword">var</span> errs []<span class="hljs-constant">error</span>
	<span class="hljs-keyword">for</span> _, p := <span class="hljs-keyword">range</span> c.Providers {
		creds, err := p.Retrieve()
		<span class="hljs-keyword">if</span> err == <span class="hljs-constant">nil</span> {
			c.curr = p
			<span class="hljs-keyword">return</span> creds, <span class="hljs-constant">nil</span>
		}
		errs = append(errs, err)
	}
	c.curr = <span class="hljs-constant">nil</span>

	<span class="hljs-keyword">var</span> err <span class="hljs-constant">error</span>
	err = ErrNoValidProvidersFoundInChain
	<span class="hljs-keyword">if</span> c.VerboseErrors {
		err = awserr.NewBatchError(<span class="hljs-string">"NoCredentialProviders"</span>, <span class="hljs-string">"no valid providers in chain"</span>, errs)
	}
	<span class="hljs-keyword">return</span> Value{}, err
}</div></pre>
    </td>
  </tr>
</table>

</div>
    
  </div>


      </div>

      <div id="footer">
  Generated on Wed Dec  7 13:38:58 2022 by
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.9.28 (ruby-2.7.0).
</div>

<!-- BEGIN-SECTION -->
<script type="text/javascript" src="https://media.amazonwebservices.com/amznUrchin.js"></script>
<!-- SiteCatalyst code version: H.25.2. Copyright 1996-2012 Adobe, Inc. All Rights Reserved.
More info available at http://www.omniture.com -->
<script language="JavaScript" type="text/javascript" src="https://media.amazonwebservices.com/js/sitecatalyst/s_code.min.js">
</script>
<script language="JavaScript" type="text/javascript">
  <!--
  s.prop66='AWS SDK for Go';
  s.eVar66='D=c66';
  s.prop65='API Reference';
  s.eVar65='D=c65';
  var s_code=s.t();if(s_code)document.write(s_code)
  //-->
</script>
<script language="JavaScript" type="text/javascript">
  <!--if(navigator.appVersion.indexOf('MSIE')>=0)document.write(unescape('%3C')+'\!-'+'-')
  //-->
</script>
<noscript>
  <img src="http://amazonwebservices.d2.sc.omtrdc.net/b/ss/awsamazondev/1/H.25.2--NS/0" height="1" width="1" border="0" alt="">
</noscript>
<!--/DO NOT REMOVE/-->
<!-- End SiteCatalyst code version: H.25.2. -->
<!-- END-SECTION -->

    </div>
  </body>
</html>
