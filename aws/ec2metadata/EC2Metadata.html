<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>
  Struct: ec2metadata.EC2Metadata
  
    &mdash; IBM COS SDK for Go
  
</title>

  <link rel="stylesheet" href="../../css/style.css" type="text/css" />

  <link rel="stylesheet" href="../../css/common.css" type="text/css" />

  <link rel="stylesheet" href="../../css/highlight.github.css" type="text/css" />

<script type="text/javascript">
  pathId = "aws/ec2metadata.EC2Metadata";
  relpath = '../../';
</script>


  <script type="text/javascript" charset="utf-8" src="../../js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="../../js/app.js"></script>


  </head>
  <body>
    <div class="nav_wrap">
      <iframe id="nav" src="../../package_list.html"></iframe>
      <div id="resizer"></div>
    </div>

    <div id="main" tabindex="-1">
      <div id="header">
        <div id="menu">
  
    <a href="../../_index.html">Index (E)</a> &raquo;
    <span class='title'><span class='object_link'><a href="../../aws.html" title="aws (package)">aws</a></span></span> &raquo; <span class='title'><span class='object_link'><a href="../ec2metadata.html" title="ec2metadata (package)">ec2metadata</a></span></span>
     &raquo; 
    <span class="title">EC2Metadata</span>
  
</div>

        <div id="search">
  
    <a class="full_list_link" id="package_list_link"
        href="../../package_list.html">

        <svg width="24" height="24">
          <rect x="0" y="4" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="12" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="20" width="24" height="4" rx="1" ry="1"></rect>
        </svg>
    </a>
  
</div>
        <div class="clear"></div>
      </div>

      <iframe id="search_frame"></iframe>

      <div id="content">
        <!--REGION_DISCLAIMER_DO_NOT_REMOVE-->
        <h1>Struct: ec2metadata.EC2Metadata
  
  
  
</h1>
<div class="package signature">
import "../ibm-cos-sdk-go/aws/ec2metadata"
</div>
<h2>Overview</h2><div class="docstring">
  <div class="discussion">
    
<p>A EC2Metadata is an EC2 Metadata service Client.</p>


  </div>
</div>
<div class="tags">
  

</div>

  <h3 class="inherited">Implemented Interfaces</h3>
  <p class="inherited"><span class='object_link'><a href="../../service/s3/s3crypto/Cipher.html" title="s3crypto.Cipher (interface)">s3crypto.Cipher</a></span>, <span class='object_link'><a href="../../service/s3/s3manager/ReadSeekerWriteTo.html" title="s3manager.ReadSeekerWriteTo (interface)">s3manager.ReadSeekerWriteTo</a></span>, <span class='object_link'><a href="../../service/s3/s3manager/WriterReadFrom.html" title="s3manager.WriterReadFrom (interface)">s3manager.WriterReadFrom</a></span></p>


  

  








  
  
  
  
  <h3 class="inherited">Fields included from <span class='object_link'><a href="../client/Client.html" title="client.Client (struct)">client.Client</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="../client/Client.html#Config-field" title="client.Client.Config (field)">client.Client.Config</a></span>, <span class='object_link'><a href="../client/Client.html#Handlers-field" title="client.Client.Handlers (field)">client.Client.Handlers</a></span></p>

  
  

  
    <h2>
      Constructor Functions
      <small><a href="#" class="summary_toggle">collapse</a></small>
    </h2>

    <ul class="summary">
      
        
<li class="public ">
  <span class="summary_signature"><span class='object_link'><a href="#New-class_method" title="ec2metadata.EC2Metadata.New() (method)">func <strong>New</strong>(p client.ConfigProvider, cfgs ...*aws.Config) *EC2Metadata </a></span></span>
  
  
  
  
  
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>New creates a new instance of the EC2Metadata client with a session.</p>
</div></span>
  
</li>


      
    </ul>
  
    <h2>
      Method  Summary
      <small><a href="#" class="summary_toggle">collapse</a></small>
    </h2>

    <ul class="summary">
      
        
<li class="public ">
  <span class="summary_signature"><span class='object_link'><a href="#Available-instance_method" title="ec2metadata.EC2Metadata.Available() (method)">func (c *EC2Metadata) <strong>Available</strong>() bool </a></span></span>
  
  
  
  
  
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Available returns if the application has access to the EC2 Metadata service.</p>
</div></span>
  
</li>


      
        
<li class="public ">
  <span class="summary_signature"><span class='object_link'><a href="#AvailableWithContext-instance_method" title="ec2metadata.EC2Metadata.AvailableWithContext() (method)">func (c *EC2Metadata) <strong>AvailableWithContext</strong>(ctx aws.Context) bool </a></span></span>
  
  
  
  
  
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>AvailableWithContext returns if the application has access to the EC2 Metadata service.</p>
</div></span>
  
</li>


      
        
<li class="public ">
  <span class="summary_signature"><span class='object_link'><a href="#GetDynamicData-instance_method" title="ec2metadata.EC2Metadata.GetDynamicData() (method)">func (c *EC2Metadata) <strong>GetDynamicData</strong>(p string) (string, error) </a></span></span>
  
  
  
  
  
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>GetDynamicData uses the path provided to request information from the EC2 instance metadata service for dynamic data.</p>
</div></span>
  
</li>


      
        
<li class="public ">
  <span class="summary_signature"><span class='object_link'><a href="#GetDynamicDataWithContext-instance_method" title="ec2metadata.EC2Metadata.GetDynamicDataWithContext() (method)">func (c *EC2Metadata) <strong>GetDynamicDataWithContext</strong>(ctx aws.Context, p string) (string, error) </a></span></span>
  
  
  
  
  
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>GetDynamicDataWithContext uses the path provided to request information from the EC2 instance metadata service for dynamic data.</p>
</div></span>
  
</li>


      
        
<li class="public ">
  <span class="summary_signature"><span class='object_link'><a href="#GetInstanceIdentityDocument-instance_method" title="ec2metadata.EC2Metadata.GetInstanceIdentityDocument() (method)">func (c *EC2Metadata) <strong>GetInstanceIdentityDocument</strong>() (EC2InstanceIdentityDocument, error) </a></span></span>
  
  
  
  
  
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>GetInstanceIdentityDocument retrieves an identity document describing an instance.</p>
</div></span>
  
</li>


      
        
<li class="public ">
  <span class="summary_signature"><span class='object_link'><a href="#GetInstanceIdentityDocumentWithContext-instance_method" title="ec2metadata.EC2Metadata.GetInstanceIdentityDocumentWithContext() (method)">func (c *EC2Metadata) <strong>GetInstanceIdentityDocumentWithContext</strong>(ctx aws.Context) (EC2InstanceIdentityDocument, error) </a></span></span>
  
  
  
  
  
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>GetInstanceIdentityDocumentWithContext retrieves an identity document describing an instance.</p>
</div></span>
  
</li>


      
        
<li class="public ">
  <span class="summary_signature"><span class='object_link'><a href="#GetMetadata-instance_method" title="ec2metadata.EC2Metadata.GetMetadata() (method)">func (c *EC2Metadata) <strong>GetMetadata</strong>(p string) (string, error) </a></span></span>
  
  
  
  
  
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>GetMetadata uses the path provided to request information from the EC2 instance metadata service.</p>
</div></span>
  
</li>


      
        
<li class="public ">
  <span class="summary_signature"><span class='object_link'><a href="#GetMetadataWithContext-instance_method" title="ec2metadata.EC2Metadata.GetMetadataWithContext() (method)">func (c *EC2Metadata) <strong>GetMetadataWithContext</strong>(ctx aws.Context, p string) (string, error) </a></span></span>
  
  
  
  
  
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>GetMetadataWithContext uses the path provided to request information from the EC2 instance metadata service.</p>
</div></span>
  
</li>


      
        
<li class="public ">
  <span class="summary_signature"><span class='object_link'><a href="#GetUserData-instance_method" title="ec2metadata.EC2Metadata.GetUserData() (method)">func (c *EC2Metadata) <strong>GetUserData</strong>() (string, error) </a></span></span>
  
  
  
  
  
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>GetUserData returns the userdata that was configured for the service.</p>
</div></span>
  
</li>


      
        
<li class="public ">
  <span class="summary_signature"><span class='object_link'><a href="#GetUserDataWithContext-instance_method" title="ec2metadata.EC2Metadata.GetUserDataWithContext() (method)">func (c *EC2Metadata) <strong>GetUserDataWithContext</strong>(ctx aws.Context) (string, error) </a></span></span>
  
  
  
  
  
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>GetUserDataWithContext returns the userdata that was configured for the service.</p>
</div></span>
  
</li>


      
        
<li class="public ">
  <span class="summary_signature"><span class='object_link'><a href="#IAMInfo-instance_method" title="ec2metadata.EC2Metadata.IAMInfo() (method)">func (c *EC2Metadata) <strong>IAMInfo</strong>() (EC2IAMInfo, error) </a></span></span>
  
  
  
  
  
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>IAMInfo retrieves IAM info from the metadata API.</p>
</div></span>
  
</li>


      
        
<li class="public ">
  <span class="summary_signature"><span class='object_link'><a href="#IAMInfoWithContext-instance_method" title="ec2metadata.EC2Metadata.IAMInfoWithContext() (method)">func (c *EC2Metadata) <strong>IAMInfoWithContext</strong>(ctx aws.Context) (EC2IAMInfo, error) </a></span></span>
  
  
  
  
  
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>IAMInfoWithContext retrieves IAM info from the metadata API.</p>
</div></span>
  
</li>


      
        
<li class="public ">
  <span class="summary_signature"><span class='object_link'><a href="#Region-instance_method" title="ec2metadata.EC2Metadata.Region() (method)">func (c *EC2Metadata) <strong>Region</strong>() (string, error) </a></span></span>
  
  
  
  
  
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Region returns the region the instance is running in.</p>
</div></span>
  
</li>


      
        
<li class="public ">
  <span class="summary_signature"><span class='object_link'><a href="#RegionWithContext-instance_method" title="ec2metadata.EC2Metadata.RegionWithContext() (method)">func (c *EC2Metadata) <strong>RegionWithContext</strong>(ctx aws.Context) (string, error) </a></span></span>
  
  
  
  
  
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>RegionWithContext returns the region the instance is running in.</p>
</div></span>
  
</li>


      
    </ul>
  


  
  
  
  
  
  
  
  
  
  <h3 class="inherited">Methods included from <span class='object_link'><a href="../client/Client.html" title="client.Client (struct)">client.Client</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="../client/Client.html#AddDebugHandlers-instance_method" title="client.Client.AddDebugHandlers() (method)">client.Client.AddDebugHandlers()</a></span>, <span class='object_link'><a href="../client/Client.html#NewRequest-instance_method" title="client.Client.NewRequest() (method)">client.Client.NewRequest()</a></span></p>

  
  



  <div id="Function_method_details" class="method_details_list">
    <h2>Function Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="New-class_method">
  
    func <strong><span class='object_link'><a href="#New-class_method" title="ec2metadata.EC2Metadata.New() (method)">New</a></span></strong>(p <span class='object_link'><a href="../client/ConfigProvider.html" title="client.ConfigProvider (interface)">client.ConfigProvider</a></span>, cfgs ...*<span class='object_link'><a href="../Config.html" title="aws.Config (struct)">aws.Config</a></span>) *<span class='object_link'><a href="" title="ec2metadata.EC2Metadata (struct)">EC2Metadata</a></span> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>New creates a new instance of the EC2Metadata client with a session. This client is safe to use across multiple goroutines.</p>

<p>Example:  // Create a EC2Metadata client from just a session.  svc := ec2metadata.New(mySession)</p>

<pre class="code go"><code class="go"><div class="hljs"><span class="hljs-comment">// Create a EC2Metadata client with additional configuration</span>
svc := ec2metadata.New(mySession, aws.NewConfig().WithLogLevel(aws.LogDebugHTTPBody))
</div></code></pre>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


67
68
69
70</pre>
    </td>
    <td>
      <pre class="code"><span class="info file">// File 'aws/ec2metadata/service.go', line 67</span>

<div class="hljs"><span class="hljs-keyword">func</span> New(p client.ConfigProvider, cfgs ...*aws.Config) *EC2Metadata {
	c := p.ClientConfig(ServiceName, cfgs...)
	<span class="hljs-keyword">return</span> NewClient(*c.Config, c.Handlers, c.Endpo<span class="hljs-constant">int</span>, c.SigningRegion)
}</div></pre>
    </td>
  </tr>
</table>

</div>
    
  </div>

  <div id="Method_method_details" class="method_details_list">
    <h2>Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="Available-instance_method">
  
    func (c *<span class='object_link'><a href="" title="ec2metadata.EC2Metadata (struct)">EC2Metadata</a></span>) <strong><span class='object_link'><a href="#Available-instance_method" title="ec2metadata.EC2Metadata.Available() (method)">Available</a></span></strong>() bool 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Available returns if the application has access to the EC2 Metadata service. Can be used to determine if application is running within an EC2 Instance and the metadata service is available.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


207
208
209</pre>
    </td>
    <td>
      <pre class="code"><span class="info file">// File 'aws/ec2metadata/api.go', line 207</span>

<div class="hljs"><span class="hljs-keyword">func</span> (c *EC2Metadata) Available() <span class="hljs-constant">bool</span> {
	<span class="hljs-keyword">return</span> c.AvailableWithContext(aws.BackgroundContext())
}</div></pre>
    </td>
  </tr>
</table>

</div>
    
      <div class="method_details ">
  <h3 class="signature " id="AvailableWithContext-instance_method">
  
    func (c *<span class='object_link'><a href="" title="ec2metadata.EC2Metadata (struct)">EC2Metadata</a></span>) <strong><span class='object_link'><a href="#AvailableWithContext-instance_method" title="ec2metadata.EC2Metadata.AvailableWithContext() (method)">AvailableWithContext</a></span></strong>(ctx <span class='object_link'><a href="../Context.html" title="aws.Context (interface)">aws.Context</a></span>) bool 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>AvailableWithContext returns if the application has access to the EC2 Metadata service. Can be used to determine if application is running within an EC2 Instance and the metadata service is available.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


214
215
216
217
218
219
220</pre>
    </td>
    <td>
      <pre class="code"><span class="info file">// File 'aws/ec2metadata/api.go', line 214</span>

<div class="hljs"><span class="hljs-keyword">func</span> (c *EC2Metadata) AvailableWithContext(ctx aws.Context) <span class="hljs-constant">bool</span> {
	<span class="hljs-keyword">if</span> _, err := c.GetMetadataWithContext(ctx, <span class="hljs-string">"instance-id"</span>); err != <span class="hljs-constant">nil</span> {
		<span class="hljs-keyword">return</span> <span class="hljs-constant">false</span>
	}

	<span class="hljs-keyword">return</span> <span class="hljs-constant">true</span>
}</div></pre>
    </td>
  </tr>
</table>

</div>
    
      <div class="method_details ">
  <h3 class="signature " id="GetDynamicData-instance_method">
  
    func (c *<span class='object_link'><a href="" title="ec2metadata.EC2Metadata (struct)">EC2Metadata</a></span>) <strong><span class='object_link'><a href="#GetDynamicData-instance_method" title="ec2metadata.EC2Metadata.GetDynamicData() (method)">GetDynamicData</a></span></strong>(p string) (string, error) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>GetDynamicData uses the path provided to request information from the EC2 instance metadata service for dynamic data. The content will be returned as a string, or error if the request failed.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


104
105
106</pre>
    </td>
    <td>
      <pre class="code"><span class="info file">// File 'aws/ec2metadata/api.go', line 104</span>

<div class="hljs"><span class="hljs-keyword">func</span> (c *EC2Metadata) GetDynamicData(p <span class="hljs-constant">string</span>) (<span class="hljs-constant">string</span>, <span class="hljs-constant">error</span>) {
	<span class="hljs-keyword">return</span> c.GetDynamicDataWithContext(aws.BackgroundContext(), p)
}</div></pre>
    </td>
  </tr>
</table>

</div>
    
      <div class="method_details ">
  <h3 class="signature " id="GetDynamicDataWithContext-instance_method">
  
    func (c *<span class='object_link'><a href="" title="ec2metadata.EC2Metadata (struct)">EC2Metadata</a></span>) <strong><span class='object_link'><a href="#GetDynamicDataWithContext-instance_method" title="ec2metadata.EC2Metadata.GetDynamicDataWithContext() (method)">GetDynamicDataWithContext</a></span></strong>(ctx <span class='object_link'><a href="../Context.html" title="aws.Context (interface)">aws.Context</a></span>, p string) (string, error) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>GetDynamicDataWithContext uses the path provided to request information from the EC2 instance metadata service for dynamic data. The content will be returned as a string, or error if the request failed.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


111
112
113
114
115
116
117
118
119
120
121
122
123
124</pre>
    </td>
    <td>
      <pre class="code"><span class="info file">// File 'aws/ec2metadata/api.go', line 111</span>

<div class="hljs"><span class="hljs-keyword">func</span> (c *EC2Metadata) GetDynamicDataWithContext(ctx aws.Context, p <span class="hljs-constant">string</span>) (<span class="hljs-constant">string</span>, <span class="hljs-constant">error</span>) {
	op := &request.Operation{
		Name:       <span class="hljs-string">"GetDynamicData"</span>,
		HTTPMethod: <span class="hljs-string">"GET"</span>,
		HTTPPath:   sdkuri.PathJoin(<span class="hljs-string">"/latest/dynamic"</span>, p),
	}

	output := &metadataOutput{}
	req := c.NewRequest(op, <span class="hljs-constant">nil</span>, output)
	req.SetContext(ctx)

	err := req.Send()
	<span class="hljs-keyword">return</span> output.Content, err
}</div></pre>
    </td>
  </tr>
</table>

</div>
    
      <div class="method_details ">
  <h3 class="signature " id="GetInstanceIdentityDocument-instance_method">
  
    func (c *<span class='object_link'><a href="" title="ec2metadata.EC2Metadata (struct)">EC2Metadata</a></span>) <strong><span class='object_link'><a href="#GetInstanceIdentityDocument-instance_method" title="ec2metadata.EC2Metadata.GetInstanceIdentityDocument() (method)">GetInstanceIdentityDocument</a></span></strong>() (<span class='object_link'><a href="../ec2metadata.html#type-EC2InstanceIdentityDocument" title="ec2metadata (package)">EC2InstanceIdentityDocument</a></span>, error) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>GetInstanceIdentityDocument retrieves an identity document describing an instance. Error is returned if the request fails or is unable to parse the response.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


129
130
131</pre>
    </td>
    <td>
      <pre class="code"><span class="info file">// File 'aws/ec2metadata/api.go', line 129</span>

<div class="hljs"><span class="hljs-keyword">func</span> (c *EC2Metadata) GetInstanceIdentityDocument() (EC2InstanceIdentityDocument, <span class="hljs-constant">error</span>) {
	<span class="hljs-keyword">return</span> c.GetInstanceIdentityDocumentWithContext(aws.BackgroundContext())
}</div></pre>
    </td>
  </tr>
</table>

</div>
    
      <div class="method_details ">
  <h3 class="signature " id="GetInstanceIdentityDocumentWithContext-instance_method">
  
    func (c *<span class='object_link'><a href="" title="ec2metadata.EC2Metadata (struct)">EC2Metadata</a></span>) <strong><span class='object_link'><a href="#GetInstanceIdentityDocumentWithContext-instance_method" title="ec2metadata.EC2Metadata.GetInstanceIdentityDocumentWithContext() (method)">GetInstanceIdentityDocumentWithContext</a></span></strong>(ctx <span class='object_link'><a href="../Context.html" title="aws.Context (interface)">aws.Context</a></span>) (<span class='object_link'><a href="../ec2metadata.html#type-EC2InstanceIdentityDocument" title="ec2metadata (package)">EC2InstanceIdentityDocument</a></span>, error) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>GetInstanceIdentityDocumentWithContext retrieves an identity document describing an instance. Error is returned if the request fails or is unable to parse the response.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152</pre>
    </td>
    <td>
      <pre class="code"><span class="info file">// File 'aws/ec2metadata/api.go', line 136</span>

<div class="hljs"><span class="hljs-keyword">func</span> (c *EC2Metadata) GetInstanceIdentityDocumentWithContext(ctx aws.Context) (EC2InstanceIdentityDocument, <span class="hljs-constant">error</span>) {
	resp, err := c.GetDynamicDataWithContext(ctx, <span class="hljs-string">"instance-identity/document"</span>)
	<span class="hljs-keyword">if</span> err != <span class="hljs-constant">nil</span> {
		<span class="hljs-keyword">return</span> EC2InstanceIdentityDocument{},
			awserr.New(<span class="hljs-string">"EC2MetadataRequestError"</span>,
				<span class="hljs-string">"failed to get EC2 instance identity document"</span>, err)
	}

	doc := EC2InstanceIdentityDocument{}
	<span class="hljs-keyword">if</span> err := json.NewDecoder(strings.NewReader(resp)).Decode(&doc); err != <span class="hljs-constant">nil</span> {
		<span class="hljs-keyword">return</span> EC2InstanceIdentityDocument{},
			awserr.New(request.ErrCodeSerialization,
				<span class="hljs-string">"failed to decode EC2 instance identity document"</span>, err)
	}

	<span class="hljs-keyword">return</span> doc, <span class="hljs-constant">nil</span>
}</div></pre>
    </td>
  </tr>
</table>

</div>
    
      <div class="method_details ">
  <h3 class="signature " id="GetMetadata-instance_method">
  
    func (c *<span class='object_link'><a href="" title="ec2metadata.EC2Metadata (struct)">EC2Metadata</a></span>) <strong><span class='object_link'><a href="#GetMetadata-instance_method" title="ec2metadata.EC2Metadata.GetMetadata() (method)">GetMetadata</a></span></strong>(p string) (string, error) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>GetMetadata uses the path provided to request information from the EC2 instance metadata service. The content will be returned as a string, or error if the request failed.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


53
54
55</pre>
    </td>
    <td>
      <pre class="code"><span class="info file">// File 'aws/ec2metadata/api.go', line 53</span>

<div class="hljs"><span class="hljs-keyword">func</span> (c *EC2Metadata) GetMetadata(p <span class="hljs-constant">string</span>) (<span class="hljs-constant">string</span>, <span class="hljs-constant">error</span>) {
	<span class="hljs-keyword">return</span> c.GetMetadataWithContext(aws.BackgroundContext(), p)
}</div></pre>
    </td>
  </tr>
</table>

</div>
    
      <div class="method_details ">
  <h3 class="signature " id="GetMetadataWithContext-instance_method">
  
    func (c *<span class='object_link'><a href="" title="ec2metadata.EC2Metadata (struct)">EC2Metadata</a></span>) <strong><span class='object_link'><a href="#GetMetadataWithContext-instance_method" title="ec2metadata.EC2Metadata.GetMetadataWithContext() (method)">GetMetadataWithContext</a></span></strong>(ctx <span class='object_link'><a href="../Context.html" title="aws.Context (interface)">aws.Context</a></span>, p string) (string, error) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>GetMetadataWithContext uses the path provided to request information from the EC2 instance metadata service. The content will be returned as a string, or error if the request failed.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


60
61
62
63
64
65
66
67
68
69
70
71
72
73
74</pre>
    </td>
    <td>
      <pre class="code"><span class="info file">// File 'aws/ec2metadata/api.go', line 60</span>

<div class="hljs"><span class="hljs-keyword">func</span> (c *EC2Metadata) GetMetadataWithContext(ctx aws.Context, p <span class="hljs-constant">string</span>) (<span class="hljs-constant">string</span>, <span class="hljs-constant">error</span>) {
	op := &request.Operation{
		Name:       <span class="hljs-string">"GetMetadata"</span>,
		HTTPMethod: <span class="hljs-string">"GET"</span>,
		HTTPPath:   sdkuri.PathJoin(<span class="hljs-string">"/latest/meta-data"</span>, p),
	}
	output := &metadataOutput{}

	req := c.NewRequest(op, <span class="hljs-constant">nil</span>, output)

	req.SetContext(ctx)

	err := req.Send()
	<span class="hljs-keyword">return</span> output.Content, err
}</div></pre>
    </td>
  </tr>
</table>

</div>
    
      <div class="method_details ">
  <h3 class="signature " id="GetUserData-instance_method">
  
    func (c *<span class='object_link'><a href="" title="ec2metadata.EC2Metadata (struct)">EC2Metadata</a></span>) <strong><span class='object_link'><a href="#GetUserData-instance_method" title="ec2metadata.EC2Metadata.GetUserData() (method)">GetUserData</a></span></strong>() (string, error) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>GetUserData returns the userdata that was configured for the service. If there is no user-data setup for the EC2 instance a “NotFoundError” error code will be returned.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


79
80
81</pre>
    </td>
    <td>
      <pre class="code"><span class="info file">// File 'aws/ec2metadata/api.go', line 79</span>

<div class="hljs"><span class="hljs-keyword">func</span> (c *EC2Metadata) GetUserData() (<span class="hljs-constant">string</span>, <span class="hljs-constant">error</span>) {
	<span class="hljs-keyword">return</span> c.GetUserDataWithContext(aws.BackgroundContext())
}</div></pre>
    </td>
  </tr>
</table>

</div>
    
      <div class="method_details ">
  <h3 class="signature " id="GetUserDataWithContext-instance_method">
  
    func (c *<span class='object_link'><a href="" title="ec2metadata.EC2Metadata (struct)">EC2Metadata</a></span>) <strong><span class='object_link'><a href="#GetUserDataWithContext-instance_method" title="ec2metadata.EC2Metadata.GetUserDataWithContext() (method)">GetUserDataWithContext</a></span></strong>(ctx <span class='object_link'><a href="../Context.html" title="aws.Context (interface)">aws.Context</a></span>) (string, error) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>GetUserDataWithContext returns the userdata that was configured for the service. If there is no user-data setup for the EC2 instance a “NotFoundError” error code will be returned.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


86
87
88
89
90
91
92
93
94
95
96
97
98
99</pre>
    </td>
    <td>
      <pre class="code"><span class="info file">// File 'aws/ec2metadata/api.go', line 86</span>

<div class="hljs"><span class="hljs-keyword">func</span> (c *EC2Metadata) GetUserDataWithContext(ctx aws.Context) (<span class="hljs-constant">string</span>, <span class="hljs-constant">error</span>) {
	op := &request.Operation{
		Name:       <span class="hljs-string">"GetUserData"</span>,
		HTTPMethod: <span class="hljs-string">"GET"</span>,
		HTTPPath:   <span class="hljs-string">"/latest/user-data"</span>,
	}

	output := &metadataOutput{}
	req := c.NewRequest(op, <span class="hljs-constant">nil</span>, output)
	req.SetContext(ctx)

	err := req.Send()
	<span class="hljs-keyword">return</span> output.Content, err
}</div></pre>
    </td>
  </tr>
</table>

</div>
    
      <div class="method_details ">
  <h3 class="signature " id="IAMInfo-instance_method">
  
    func (c *<span class='object_link'><a href="" title="ec2metadata.EC2Metadata (struct)">EC2Metadata</a></span>) <strong><span class='object_link'><a href="#IAMInfo-instance_method" title="ec2metadata.EC2Metadata.IAMInfo() (method)">IAMInfo</a></span></strong>() (<span class='object_link'><a href="../ec2metadata.html#type-EC2IAMInfo" title="ec2metadata (package)">EC2IAMInfo</a></span>, error) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>IAMInfo retrieves IAM info from the metadata API</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


155
156
157</pre>
    </td>
    <td>
      <pre class="code"><span class="info file">// File 'aws/ec2metadata/api.go', line 155</span>

<div class="hljs"><span class="hljs-keyword">func</span> (c *EC2Metadata) IAMInfo() (EC2IAMInfo, <span class="hljs-constant">error</span>) {
	<span class="hljs-keyword">return</span> c.IAMInfoWithContext(aws.BackgroundContext())
}</div></pre>
    </td>
  </tr>
</table>

</div>
    
      <div class="method_details ">
  <h3 class="signature " id="IAMInfoWithContext-instance_method">
  
    func (c *<span class='object_link'><a href="" title="ec2metadata.EC2Metadata (struct)">EC2Metadata</a></span>) <strong><span class='object_link'><a href="#IAMInfoWithContext-instance_method" title="ec2metadata.EC2Metadata.IAMInfoWithContext() (method)">IAMInfoWithContext</a></span></strong>(ctx <span class='object_link'><a href="../Context.html" title="aws.Context (interface)">aws.Context</a></span>) (<span class='object_link'><a href="../ec2metadata.html#type-EC2IAMInfo" title="ec2metadata (package)">EC2IAMInfo</a></span>, error) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>IAMInfoWithContext retrieves IAM info from the metadata API</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


160
161
162
163
164
165
166
167
168
169
170
171
172
173
174
175
176
177
178
179
180
181
182</pre>
    </td>
    <td>
      <pre class="code"><span class="info file">// File 'aws/ec2metadata/api.go', line 160</span>

<div class="hljs"><span class="hljs-keyword">func</span> (c *EC2Metadata) IAMInfoWithContext(ctx aws.Context) (EC2IAMInfo, <span class="hljs-constant">error</span>) {
	resp, err := c.GetMetadataWithContext(ctx, <span class="hljs-string">"iam/info"</span>)
	<span class="hljs-keyword">if</span> err != <span class="hljs-constant">nil</span> {
		<span class="hljs-keyword">return</span> EC2IAMInfo{},
			awserr.New(<span class="hljs-string">"EC2MetadataRequestError"</span>,
				<span class="hljs-string">"failed to get EC2 IAM info"</span>, err)
	}

	info := EC2IAMInfo{}
	<span class="hljs-keyword">if</span> err := json.NewDecoder(strings.NewReader(resp)).Decode(&info); err != <span class="hljs-constant">nil</span> {
		<span class="hljs-keyword">return</span> EC2IAMInfo{},
			awserr.New(request.ErrCodeSerialization,
				<span class="hljs-string">"failed to decode EC2 IAM info"</span>, err)
	}

	<span class="hljs-keyword">if</span> info.Code != <span class="hljs-string">"Success"</span> {
		errMsg := fmt.Sprintf(<span class="hljs-string">"failed to get EC2 IAM Info (%s)"</span>, info.Code)
		<span class="hljs-keyword">return</span> EC2IAMInfo{},
			awserr.New(<span class="hljs-string">"EC2MetadataError"</span>, errMsg, <span class="hljs-constant">nil</span>)
	}

	<span class="hljs-keyword">return</span> info, <span class="hljs-constant">nil</span>
}</div></pre>
    </td>
  </tr>
</table>

</div>
    
      <div class="method_details ">
  <h3 class="signature " id="Region-instance_method">
  
    func (c *<span class='object_link'><a href="" title="ec2metadata.EC2Metadata (struct)">EC2Metadata</a></span>) <strong><span class='object_link'><a href="#Region-instance_method" title="ec2metadata.EC2Metadata.Region() (method)">Region</a></span></strong>() (string, error) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Region returns the region the instance is running in.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


185
186
187</pre>
    </td>
    <td>
      <pre class="code"><span class="info file">// File 'aws/ec2metadata/api.go', line 185</span>

<div class="hljs"><span class="hljs-keyword">func</span> (c *EC2Metadata) Region() (<span class="hljs-constant">string</span>, <span class="hljs-constant">error</span>) {
	<span class="hljs-keyword">return</span> c.RegionWithContext(aws.BackgroundContext())
}</div></pre>
    </td>
  </tr>
</table>

</div>
    
      <div class="method_details ">
  <h3 class="signature " id="RegionWithContext-instance_method">
  
    func (c *<span class='object_link'><a href="" title="ec2metadata.EC2Metadata (struct)">EC2Metadata</a></span>) <strong><span class='object_link'><a href="#RegionWithContext-instance_method" title="ec2metadata.EC2Metadata.RegionWithContext() (method)">RegionWithContext</a></span></strong>(ctx <span class='object_link'><a href="../Context.html" title="aws.Context (interface)">aws.Context</a></span>) (string, error) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>RegionWithContext returns the region the instance is running in.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


190
191
192
193
194
195
196
197
198
199
200
201
202</pre>
    </td>
    <td>
      <pre class="code"><span class="info file">// File 'aws/ec2metadata/api.go', line 190</span>

<div class="hljs"><span class="hljs-keyword">func</span> (c *EC2Metadata) RegionWithContext(ctx aws.Context) (<span class="hljs-constant">string</span>, <span class="hljs-constant">error</span>) {
	ec2InstanceIdentityDocument, err := c.GetInstanceIdentityDocumentWithContext(ctx)
	<span class="hljs-keyword">if</span> err != <span class="hljs-constant">nil</span> {
		<span class="hljs-keyword">return</span> <span class="hljs-string">""</span>, err
	}
	<span class="hljs-comment">// extract region from the ec2InstanceIdentityDocument</span>
	region := ec2InstanceIdentityDocument.Region
	<span class="hljs-keyword">if</span> len(region) == 0 {
		<span class="hljs-keyword">return</span> <span class="hljs-string">""</span>, awserr.New(<span class="hljs-string">"EC2MetadataError"</span>, <span class="hljs-string">"invalid region received for ec2metadata instance"</span>, <span class="hljs-constant">nil</span>)
	}
	<span class="hljs-comment">// returns region</span>
	<span class="hljs-keyword">return</span> region, <span class="hljs-constant">nil</span>
}</div></pre>
    </td>
  </tr>
</table>

</div>
    
  </div>


      </div>

      <div id="footer">
  Generated on Thu Jun  9 14:07:13 2022 by
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.9.28 (ruby-2.7.0).
</div>

<!-- BEGIN-SECTION -->
<script type="text/javascript" src="https://media.amazonwebservices.com/amznUrchin.js"></script>
<!-- SiteCatalyst code version: H.25.2. Copyright 1996-2012 Adobe, Inc. All Rights Reserved.
More info available at http://www.omniture.com -->
<script language="JavaScript" type="text/javascript" src="https://media.amazonwebservices.com/js/sitecatalyst/s_code.min.js">
</script>
<script language="JavaScript" type="text/javascript">
  <!--
  s.prop66='AWS SDK for Go';
  s.eVar66='D=c66';
  s.prop65='API Reference';
  s.eVar65='D=c65';
  var s_code=s.t();if(s_code)document.write(s_code)
  //-->
</script>
<script language="JavaScript" type="text/javascript">
  <!--if(navigator.appVersion.indexOf('MSIE')>=0)document.write(unescape('%3C')+'\!-'+'-')
  //-->
</script>
<noscript>
  <img src="http://amazonwebservices.d2.sc.omtrdc.net/b/ss/awsamazondev/1/H.25.2--NS/0" height="1" width="1" border="0" alt="">
</noscript>
<!--/DO NOT REMOVE/-->
<!-- End SiteCatalyst code version: H.25.2. -->
<!-- END-SECTION -->

    </div>
  </body>
</html>
