<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>
  Struct: v4.Signer
  
    &mdash; IBM COS SDK for Go
  
</title>

  <link rel="stylesheet" href="../../../css/style.css" type="text/css" />

  <link rel="stylesheet" href="../../../css/common.css" type="text/css" />

  <link rel="stylesheet" href="../../../css/highlight.github.css" type="text/css" />

<script type="text/javascript">
  pathId = "aws/signer/v4.Signer";
  relpath = '../../../';
</script>


  <script type="text/javascript" charset="utf-8" src="../../../js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="../../../js/app.js"></script>


  </head>
  <body>
    <div class="nav_wrap">
      <iframe id="nav" src="../../../package_list.html"></iframe>
      <div id="resizer"></div>
    </div>

    <div id="main" tabindex="-1">
      <div id="header">
        <div id="menu">
  
    <a href="../../../_index.html">Index (S)</a> &raquo;
    <span class='title'><span class='object_link'><a href="../../../aws.html" title="aws (package)">aws</a></span></span> &raquo; <span class='title'><span class='object_link'><a href="../../signer.html" title="signer (package)">signer</a></span></span> &raquo; <span class='title'><span class='object_link'><a href="../v4.html" title="v4 (package)">v4</a></span></span>
     &raquo; 
    <span class="title">Signer</span>
  
</div>

        <div id="search">
  
    <a class="full_list_link" id="package_list_link"
        href="../../../package_list.html">

        <svg width="24" height="24">
          <rect x="0" y="4" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="12" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="20" width="24" height="4" rx="1" ry="1"></rect>
        </svg>
    </a>
  
</div>
        <div class="clear"></div>
      </div>

      <iframe id="search_frame"></iframe>

      <div id="content">
        <!--REGION_DISCLAIMER_DO_NOT_REMOVE-->
        <h1>Struct: v4.Signer
  
  
  
</h1>
<div class="package signature">
import "../ibm-cos-sdk-go/aws/signer/v4"
</div>
<h2>Overview</h2><div class="docstring">
  <div class="discussion">
    
<p>Signer applies AWS v4 signing to given request. Use this to sign requests
that need to be signed with AWS V4 Signatures.</p>


  </div>
</div>
<div class="tags">
  

</div>

  <h3 class="inherited">Implemented Interfaces</h3>
  <p class="inherited"><span class='object_link'><a href="../../../service/s3/s3crypto/Cipher.html" title="s3crypto.Cipher (interface)">s3crypto.Cipher</a></span>, <span class='object_link'><a href="../../../service/s3/s3manager/ReadSeekerWriteTo.html" title="s3manager.ReadSeekerWriteTo (interface)">s3manager.ReadSeekerWriteTo</a></span>, <span class='object_link'><a href="../../../service/s3/s3manager/WriterReadFrom.html" title="s3manager.WriterReadFrom (interface)">s3manager.WriterReadFrom</a></span></p>


  

  







  <h2>
    Structure Field Summary
    <small><a href="#" class="summary_toggle">collapse</a></small>
  </h2>

  <ul class="summary">
    
      
<li class="public ">
  <span class="summary_signature"><span class='object_link'><a href="#Credentials-field" title="v4.Signer.Credentials (field)"><strong>Credentials</strong> *credentials.Credentials</a></span></span>
  
  
  
  
  
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>The authentication credentials the request will be signed against.</p>
</div></span>
  
</li>


    
      
<li class="public ">
  <span class="summary_signature"><span class='object_link'><a href="#Debug-field" title="v4.Signer.Debug (field)"><strong>Debug</strong> aws.LogLevelType</a></span></span>
  
  
  
  
  
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Sets the log level the signer should use when reporting information to the
logger.</p>
</div></span>
  
</li>


    
      
<li class="public ">
  <span class="summary_signature"><span class='object_link'><a href="#DisableHeaderHoisting-field" title="v4.Signer.DisableHeaderHoisting (field)"><strong>DisableHeaderHoisting</strong> bool</a></span></span>
  
  
  
  
  
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Disables the Signer&#39;s moving HTTP header key/value pairs from the HTTP
request header to the request&#39;s query string.</p>
</div></span>
  
</li>


    
      
<li class="public ">
  <span class="summary_signature"><span class='object_link'><a href="#DisableRequestBodyOverwrite-field" title="v4.Signer.DisableRequestBodyOverwrite (field)"><strong>DisableRequestBodyOverwrite</strong> bool</a></span></span>
  
  
  
  
  
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Disables the automatical setting of the HTTP request&#39;s Body field with
the io.ReadSeeker passed in to the signer.</p>
</div></span>
  
</li>


    
      
<li class="public ">
  <span class="summary_signature"><span class='object_link'><a href="#DisableURIPathEscaping-field" title="v4.Signer.DisableURIPathEscaping (field)"><strong>DisableURIPathEscaping</strong> bool</a></span></span>
  
  
  
  
  
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Disables the automatic escaping of the URI path of the request for the
siganture&#39;s canonical string&#39;s path.</p>
</div></span>
  
</li>


    
      
<li class="public ">
  <span class="summary_signature"><span class='object_link'><a href="#Logger-field" title="v4.Signer.Logger (field)"><strong>Logger</strong> aws.Logger</a></span></span>
  
  
  
  
  
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>The logger loging information will be written to.</p>
</div></span>
  
</li>


    
      
<li class="public ">
  <span class="summary_signature"><span class='object_link'><a href="#UnsignedPayload-field" title="v4.Signer.UnsignedPayload (field)"><strong>UnsignedPayload</strong> bool</a></span></span>
  
  
  
  
  
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>UnsignedPayload will prevent signing of the payload.</p>
</div></span>
  
</li>


    
  </ul>



  
    <h2>
      Method  Summary
      <small><a href="#" class="summary_toggle">collapse</a></small>
    </h2>

    <ul class="summary">
      
        
<li class="public ">
  <span class="summary_signature"><span class='object_link'><a href="#Presign-instance_method" title="v4.Signer.Presign() (method)">func (v4 Signer) <strong>Presign</strong>(r *http.Request, body io.ReadSeeker, service, region string, exp time.Duration, signTime time.Time) (http.Header, error) </a></span></span>
  
  
  
  
  
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Presign signs AWS v4 requests with the provided body, service name, region
the request is made to, and time the request is signed at.</p>
</div></span>
  
</li>


      
        
<li class="public ">
  <span class="summary_signature"><span class='object_link'><a href="#Sign-instance_method" title="v4.Signer.Sign() (method)">func (v4 Signer) <strong>Sign</strong>(r *http.Request, body io.ReadSeeker, service, region string, signTime time.Time) (http.Header, error) </a></span></span>
  
  
  
  
  
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Sign signs AWS v4 requests with the provided body, service name, region the
request is made to, and time the request is signed at.</p>
</div></span>
  
</li>


      
    </ul>
  




  <div id="type_details" class="method_details_list">
    <h2>Structure Field Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="Credentials-field">
  <strong>Credentials</strong> *<span class='object_link'><a href="../../credentials/Credentials.html" title="credentials.Credentials (struct)">credentials.Credentials</a></span> 
  
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>The authentication credentials the request will be signed against. This
value must be set to sign requests.</p>


  </div>
</div>
<div class="tags">
  

</div>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="Debug-field">
  <strong>Debug</strong> <span class='object_link'><a href="../../LogLevelType.html" title="aws.LogLevelType (struct)">aws.LogLevelType</a></span> 
  
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Sets the log level the signer should use when reporting information to the
logger. If the logger is nil nothing will be logged. See aws.LogLevelType
for more information on available logging levels</p>

<p>By default nothing will be logged.</p>


  </div>
</div>
<div class="tags">
  

</div>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="DisableHeaderHoisting-field">
  <strong>DisableHeaderHoisting</strong> bool 
  
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Disables the Signer&#39;s moving HTTP header key/value pairs from the HTTP
request header to the request&#39;s query string. This is most commonly
used with pre-signed requests preventing headers from being added to the
request&#39;s query string.</p>


  </div>
</div>
<div class="tags">
  

</div>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="DisableRequestBodyOverwrite-field">
  <strong>DisableRequestBodyOverwrite</strong> bool 
  
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Disables the automatical setting of the HTTP request&#39;s Body field with
the io.ReadSeeker passed in to the signer. This is useful if you&#39;re
using a custom wrapper around the body for the io.ReadSeeker and want to
preserve the Body value on the Request.Body.</p>

<p>This does run the risk of signing a request with a body that will not be
sent in the request. Need to ensure that the underlying data of the Body
values are the same.</p>


  </div>
</div>
<div class="tags">
  

</div>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="DisableURIPathEscaping-field">
  <strong>DisableURIPathEscaping</strong> bool 
  
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Disables the automatic escaping of the URI path of the request for the
siganture&#39;s canonical string&#39;s path. For services that do not need
additional escaping then use this to disable the signer escaping the path.</p>

<p>S3 is an example of a service that does not need additional escaping.</p>

<p><a
href="http://docs.aws.amazon.com/general/latest/gr/sigv4-create-canonical-request.html">docs.aws.amazon.com/general/latest/gr/sigv4-create-canonical-request.html</a></p>


  </div>
</div>
<div class="tags">
  

</div>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="Logger-field">
  <strong>Logger</strong> <span class='object_link'><a href="../../Logger.html" title="aws.Logger (interface)">aws.Logger</a></span> 
  
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>The logger loging information will be written to. If there the logger is
nil, nothing will be logged.</p>


  </div>
</div>
<div class="tags">
  

</div>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="UnsignedPayload-field">
  <strong>UnsignedPayload</strong> bool 
  
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>UnsignedPayload will prevent signing of the payload. This will only work
for services that have support for this.</p>


  </div>
</div>
<div class="tags">
  

</div>
</div>
    
  </div>


  <div id="Method_method_details" class="method_details_list">
    <h2>Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="Presign-instance_method">
  
    func (v4 <span class='object_link'><a href="" title="v4.Signer (struct)">Signer</a></span>) <strong><span class='object_link'><a href="#Presign-instance_method" title="v4.Signer.Presign() (method)">Presign</a></span></strong>(r *http.Request, body io.ReadSeeker, service, region string, exp time.Duration, signTime time.Time) (http.Header, error) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Presign signs AWS v4 requests with the provided body, service name, region
the request is made to, and time the request is signed at. The signTime
allows you to specify that a request is signed for the future, and cannot
be used until then.</p>

<p>Returns a list of HTTP headers that were included in the signature or an
error if signing the request failed. For presigned requests these headers
and their values must be included on the HTTP request when it is made. This
is helpful to know what header values need to be shared with the party the
presigned request will be distributed to.</p>

<p>Presign differs from Sign in that it will sign the request using query
string instead of header values. This allows you to share the Presigned
Request&#39;s URL with third parties, or distribute it throughout your
system with minimal dependencies.</p>

<p>Presign also takes an exp value which is the duration the signed request
will be valid after the signing time. This is allows you to set when the
request will expire.</p>

<p>The requests body is an io.ReadSeeker so the SHA256 of the body can be
generated. To bypass the signer computing the hash you can set the
“X-Amz-Content-Sha256” header with a precomputed value. The signer will
only compute the hash if the request header value is empty.</p>

<p>Presigning a S3 request will not compute the body&#39;s SHA256 hash by
default. This is done due to the general use case for S3 presigned URLs is
to share PUT/GET capabilities. If you would like to include the body&#39;s
SHA256 in the presigned request&#39;s signature you can set the
“X-Amz-Content-Sha256” HTTP header and that will be included in the
request&#39;s signature.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


309
310
311</pre>
    </td>
    <td>
      <pre class="code"><span class="info file">// File 'aws/signer/v4/v4.go', line 309</span>

<div class="hljs"><span class="hljs-keyword">func</span> (v4 Signer) Presign(r *http.Request, body io.ReadSeeker, service, region <span class="hljs-constant">string</span>, exp time.Duration, signTime time.Time) (http.Header, <span class="hljs-constant">error</span>) {
	<span class="hljs-keyword">return</span> v4.signWithBody(r, body, service, region, exp, <span class="hljs-constant">true</span>, signTime)
}</div></pre>
    </td>
  </tr>
</table>

</div>
    
      <div class="method_details ">
  <h3 class="signature " id="Sign-instance_method">
  
    func (v4 <span class='object_link'><a href="" title="v4.Signer (struct)">Signer</a></span>) <strong><span class='object_link'><a href="#Sign-instance_method" title="v4.Signer.Sign() (method)">Sign</a></span></strong>(r *http.Request, body io.ReadSeeker, service, region string, signTime time.Time) (http.Header, error) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Sign signs AWS v4 requests with the provided body, service name, region the
request is made to, and time the request is signed at. The signTime allows
you to specify that a request is signed for the future, and cannot be used
until then.</p>

<p>Returns a list of HTTP headers that were included in the signature or an
error if signing the request failed. Generally for signed requests this
value is not needed as the full request context will be captured by the
http.Request value. It is included for reference though.</p>

<p>Sign will set the request&#39;s Body to be the <code>body</code> parameter
passed in. If the body is not already an io.ReadCloser, it will be wrapped
within one. If a <code>nil</code> body parameter passed to Sign, the
request&#39;s Body field will be also set to nil. Its important to note
that this functionality will not change the request&#39;s ContentLength of
the request.</p>

<p>Sign differs from Presign in that it will sign the request using HTTP
header values. This type of signing is intended for http.Request values
that will not be shared, or are shared in a way the header values on the
request will not be lost.</p>

<p>The requests body is an io.ReadSeeker so the SHA256 of the body can be
generated. To bypass the signer computing the hash you can set the
“X-Amz-Content-Sha256” header with a precomputed value. The signer will
only compute the hash if the request header value is empty.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


275
276
277</pre>
    </td>
    <td>
      <pre class="code"><span class="info file">// File 'aws/signer/v4/v4.go', line 275</span>

<div class="hljs"><span class="hljs-keyword">func</span> (v4 Signer) Sign(r *http.Request, body io.ReadSeeker, service, region <span class="hljs-constant">string</span>, signTime time.Time) (http.Header, <span class="hljs-constant">error</span>) {
	<span class="hljs-keyword">return</span> v4.signWithBody(r, body, service, region, 0, <span class="hljs-constant">false</span>, signTime)
}</div></pre>
    </td>
  </tr>
</table>

</div>
    
  </div>


      </div>

      <div id="footer">
  Generated on Tue Oct 27 16:29:07 2020 by
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.9.25 (ruby-2.3.1).
</div>

<!-- BEGIN-SECTION -->
<script type="text/javascript" src="https://media.amazonwebservices.com/amznUrchin.js"></script>
<!-- SiteCatalyst code version: H.25.2. Copyright 1996-2012 Adobe, Inc. All Rights Reserved.
More info available at http://www.omniture.com -->
<script language="JavaScript" type="text/javascript" src="https://media.amazonwebservices.com/js/sitecatalyst/s_code.min.js">
</script>
<script language="JavaScript" type="text/javascript">
  <!--
  s.prop66='AWS SDK for Go';
  s.eVar66='D=c66';
  s.prop65='API Reference';
  s.eVar65='D=c65';
  var s_code=s.t();if(s_code)document.write(s_code)
  //-->
</script>
<script language="JavaScript" type="text/javascript">
  <!--if(navigator.appVersion.indexOf('MSIE')>=0)document.write(unescape('%3C')+'\!-'+'-')
  //-->
</script>
<noscript>
  <img src="http://amazonwebservices.d2.sc.omtrdc.net/b/ss/awsamazondev/1/H.25.2--NS/0" height="1" width="1" border="0" alt="">
</noscript>
<!--/DO NOT REMOVE/-->
<!-- End SiteCatalyst code version: H.25.2. -->
<!-- END-SECTION -->

    </div>
  </body>
</html>
